!function(){"use strict";angular.module("app.components",[])}(),function(){"use strict";function t(t,e,n,a,o,i,s,r,l,c,u,d,m,p,v,g,f,h,k,y,b){function w(){f(function(){O(),U(),N(),d.viewLoaded(),d.mapStateLoaded()},1e3),"never published"===z.kit.state.name||"not configured"===z.kit.state.name?(z.kitBelongsToUser?y.info.noData.owner(n.id):y.info.noData.visitor(),f(function(){d.kitWithoutData({belongsToUser:z.kitBelongsToUser})},1e3)):u.isWithin(1,"months",z.kit.time)||y.info.longTime()}function S(){var t=l.alert().title("Delete your account?").content("If you wish to remove you account completely, please contact our support team at support@smartcitizen.me").ariaLabel("").ok("OK!").theme("primary").clickOutsideToClose(!0);l.show(t)}function T(t){z.selectedSensor=t}function C(t){var e=angular.element(".sensors_container"),n=e.scrollLeft(),a=20;"left"===t?e.scrollLeft(n+a):"right"===t&&e.scrollLeft(n-a)}function L(){return z.sensors.filter(function(t){return t.id!==z.selectedSensor})}function I(t,e){t[0]&&(e||(e={}),e.from=e&&e.from||G.getValuePickerFrom(),e.to=e&&e.to||G.getValuePickerTo(),z.loadingChart=!0,b.all(_.map(t,function(t){return P(n.id,t,e.from,e.to).then(function(t){return t})})).then(function(){z.chartDataMain=$([M,B])}))}function P(t,e,n,a){return s.getSensorsDataNew(t,e,n,a).then(function(t){return j[e]=t.readings,t})}function $(t){var e=D(j,t[0]),n={data:e,color:z.selectedSensorData.color,unit:z.selectedSensorData.unit};if(t[1]&&-1!==t[1])var a=D(j,t[1]),o={data:a,color:z.selectedSensorToCompareData.color,unit:z.selectedSensorToCompareData.unit};var i=[n,o];return i}function D(t,e){return 0===t.length?[]:t[e].map(function(t){var e=t[0],n=t[1],a=null===n?0:n;return{time:e,count:a,value:n}})}function x(t){var e=t.value;void 0!==e&&("main"===t.type?M=e:"compare"===t.type&&(B=e))}function O(){var t=angular.element(".sensor_icon_selected"),e=t.find(".container_parent");e.css("fill",z.selectedSensorData.color)}function A(){var t=angular.element(".sensor_compare").find("md-select-label").find("span");t.css("color",z.selectedSensorToCompareData.color||"white");var e=angular.element(".sensor_compare").find("md-select-label").find(".md-select-icon");e.css("color","white")}function U(){var t;t=angular.element(".chart_move_left").find("svg"),t.find(".fill_container").css("fill","#03252D"),t=angular.element(".chart_move_right").find("svg"),t.find(".fill_container").css("fill","#4E656B")}function N(){var t=angular.element(".kit_time_icon");t.find(".stroke_container").css({"stroke-width":"0.5px",stroke:"#A4B0B3"}),t.find(".fill_container").css("fill","#A4B0B3")}function F(t){return new Date(t).getTime()}function R(){return F(G.getValuePickerTo())-F(G.getValuePickerFrom())}function E(t){var e,n,a=R();if("left"===t)e=G.getValuePickerFrom(),n=F(G.getValuePickerFrom())-a,G.setValuePickers([n,e]);else if("right"===t){var o=u.getToday(),i=G.getValuePickerTo();if(u.isSameDay(o,i))return;n=G.getValuePickerTo(),e=F(G.getValuePickerTo())+a,G.setValuePickers([n,e])}}function K(){function t(){return F(new Date)}function e(){return F(t()-6048e5)}function n(){var t=moment(),e=moment(a.time),n=t.diff(e,"days"),o=3*n;return e.subtract(o,"days").valueOf()}var o="single",i=angular.element("#picker_from").pickadate({onClose:function(){angular.element(document.activeElement).blur()},container:"body",klass:{holder:"picker__holder picker_container"}}),s=i.pickadate("picker"),r=angular.element("#picker_to").pickadate({onClose:function(){angular.element(document.activeElement).blur()},container:"body",klass:{holder:"picker__holder picker_container"}}),l=r.pickadate("picker");return s.get("value")&&l.set("min",s.get("select")),l.get("value")&&s.set("max",l.get("select")),s.on("set",function(t){if(t.select){if(l.get("value")&&"single"===o){var e=[M,B];e=e.filter(function(t){return t}),I(e,{from:s.get("value"),to:l.get("value")})}l.set("min",s.get("select"))}else"clear"in t&&l.set("min",!1)}),l.on("set",function(t){if(t.select){if(s.get("value")){var e=[M,B];e=e.filter(function(t){return t}),I(e,{from:s.get("value"),to:l.get("value")})}s.set("max",l.get("select"))}else"clear"in t&&s.set("max",!1)}),l.set("max",new Date),u.isWithin(7,"days",a.time)||!a.time?s.set("select",e()):s.set("select",n()),l.set("select",t()),{getValuePickerFrom:function(){return s.get("value")},setValuePickerFrom:function(t){o="single",s.set("select",t)},getValuePickerTo:function(){return l.get("value")},setValuePickerTo:function(t){o="single",l.set("select",t)},setValuePickers:function(t){var e=t[0],n=t[1];o="pair",s.set("select",e),l.set("select",n)}}}var M,B,z=this,j=[],G=K();d.kitLoaded({lat:a.latitude,lng:a.longitude,id:parseInt(n.id)}),z.kit=a,z.ownerKits=o,z.kitBelongsToUser=c,z.removeUser=S,z.battery=h[1],z.sensors=h[0],z.sensorsToCompare=k,z.slide=C,z.selectedSensor=z.sensors[0].id,z.selectedSensorData={},z.selectedSensorToCompare=void 0,z.selectedSensorToCompareData={},z.showSensorOnChart=T,z.moveChart=E,z.loadingChart=!0,e.$watch("vm.selectedSensor",function(t){z.selectedSensorToCompare=void 0,z.selectedSensorToCompareData={},z.chartDataCompare=[],B=void 0,z.sensors.forEach(function(e){e.id===t&&_.extend(z.selectedSensorData,e)}),z.sensorsToCompare=L(),f(function(){O(),A(),x({type:"main",value:t}),I([M])},100)}),e.$watch("vm.selectedSensorToCompare",function(t,e){z.sensorsToCompare.forEach(function(e){e.id===t&&_.extend(z.selectedSensorToCompareData,e)}),f(function(){A(),x({type:"compare",value:t}),(void 0!==e||void 0!==t)&&I([B])},100)}),e.$on("hideChartSpinner",function(){z.loadingChart=!1}),w()}angular.module("app.components").controller("KitController",t),t.$inject=["$state","$scope","$stateParams","kitData","ownerKits","utils","sensor","FullKit","$mdDialog","belongsToUser","timeUtils","animation","$location","auth","kitUtils","userUtils","$timeout","mainSensors","compareSensors","alert","$q"]}(),function(){"use strict";function t(t,e,n,a,o,i){function s(){e.viewLoaded(),d()}function r(){window.navigator.geolocation.getCurrentPosition(function(e){t.$apply(function(){var t=e.coords.latitude,n=e.coords.longitude;p.kitForm.location.lat=t,p.kitForm.location.lng=n,p.markers.main.lat=t,p.markers.main.lng=n})})}function l(t){p.kitForm.tags=_.filter(p.kitForm.tags,function(e){return e.id!==t})}function c(){var t={name:p.kitForm.name,description:p.kitForm.description,exposure:m(p.kitForm.exposure),latitude:p.kitForm.location.lat,longitude:p.kitForm.location.lng,user_tags:_.pluck(p.kitForm.tags,"name").join(",")};n.createDevice(t).then(function(){o.success("Your kit was created but has not been configured yet"),i.updateUser(),p.step=2,$("#setuptool").scktool()},function(t){p.errors=t.data.errors,o.error("There has been an error during kit set up")})}function u(){}function d(){a.getTags().then(function(t){p.tags=t})}function m(t){var e,n;isNaN(parseInt(t))?(e="name",n="value"):(e="value",n="name");var a=_.find(p.exposure,function(n){return n[e]===t});return a?a[n]:void 0}var p=this;p.step=1,p.submitStepOne=c,p.submitStepTwo=u,p.kitForm={name:void 0,elevation:void 0,exposure:void 0,location:{lat:void 0,lng:void 0,zoom:16},tags:[]},p.exposure=[{name:"indoor",value:1},{name:"outdoor",value:2}],p.tags=[],t.$watch("vm.tag",function(t){if(t){p.tag=void 0;var e=_.some(p.kitForm.tags,function(e){return e.id===t});if(!e){var n=_.find(p.tags,function(e){return e.id===t});p.kitForm.tags.push(n)}}}),p.removeTag=l,p.getLocation=r,p.markers={main:{lat:void 0,lng:void 0,draggable:!0}},p.tiles={url:"https://api.tiles.mapbox.com/v4/mapbox.streets-basic/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidG9tYXNkaWV6IiwiYSI6ImRTd01HSGsifQ.loQdtLNQ8GJkJl2LUzzxVg"},p.defaults={scrollWheelZoom:!1},s()}angular.module("app.components").controller("NewKitController",t),t.$inject=["$scope","animation","device","tag","alert","auth"]}(),function(){"use strict";function t(t,e,n,a,o,i){function s(){e.viewLoaded(),m()}function r(){window.navigator.geolocation.getCurrentPosition(function(e){t.$apply(function(){var t=e.coords.latitude,n=e.coords.longitude;p.kitForm.location.lat=t,p.kitForm.location.lng=n,p.markers.main.lat=t,p.markers.main.lng=n})})}function l(t){p.kitForm.tags=_.filter(p.kitForm.tags,function(e){return e.id!==t})}function c(){var t={name:p.kitForm.name,description:p.kitForm.description,exposure:d(p.kitForm.exposure),latitude:p.kitForm.location.lat,longitude:p.kitForm.location.lng,user_tags:_.pluck(p.kitForm.tags,"name").join(",")};n.updateDevice(a.id,t).then(function(){i.success("Your kit was successfully updated")},function(){i.error("There has been an error during kit set up")})}function u(){$("#setuptool").scktool()}function d(t){var e,n;isNaN(parseInt(t))?(e="name",n="value"):(e="value",n="name");var a=_.find(p.exposure,function(n){return n[e]===t});return a?a[n]:void 0}function m(){o.getTags().then(function(t){p.tags=t})}var p=this;p.submitForm=c,p.openKitSetup=u,p.exposure=[{name:"indoor",value:1},{name:"outdoor",value:2}],p.submitForm=c,p.kitForm={name:a.name,elevation:a.elevation,exposure:(a.labels.indexOf("indoor")>=0||a.labels.indexOf("outdoor")>=0)&&d(a.labels.indexOf("indoor")?"indoor":"outdoor"),location:{lat:a.latitude,lng:a.longitude,zoom:16},tags:a.userTags,description:a.description},p.tags=[],t.$watch("vm.tag",function(t){if(t){p.tag=void 0;var e=_.some(p.kitForm.tags,function(e){return e.id===t});if(!e){var n=_.find(p.tags,function(e){return e.id===t});p.kitForm.tags.push(n)}}}),p.removeTag=l,p.getLocation=r,p.markers={main:{lat:a.latitude,lng:a.longitude,draggable:!0}},p.tiles={url:"https://api.tiles.mapbox.com/v4/mapbox.streets-basic/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidG9tYXNkaWV6IiwiYSI6ImRTd01HSGsifQ.loQdtLNQ8GJkJl2LUzzxVg"},p.defaults={scrollWheelZoom:!1},s()}angular.module("app.components").controller("EditKitController",t),t.$inject=["$scope","animation","device","kitData","tag","alert"]}(),function(){"use strict";angular.module("app.components").factory("User",["COUNTRY_CODES",function(t){function e(e){this.id=e.id,this.username=e.username,this.avatar=e.avatar,this.kits=e.devices,this.url=e.url,this.city=e.location.city,this.country=t[e.location.country_code]}return e}])}(),function(){"use strict";angular.module("app.components").factory("NonAuthUser",["User",function(t){function e(e){t.call(this,e)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=t,e}])}(),function(){"use strict";angular.module("app.components").factory("AuthUser",["User",function(t){function e(e){t.call(this,e),this.email=e.email,this.role=e.role,this.key=e.legacy_api_key}return e.prototype=Object.create(t.prototype),e.prototype.constructor=t,e}])}(),function(){"use strict";angular.module("app.components").factory("Sensor",["sensorUtils",function(t){function e(e,n){this.name=t.getSensorName(e),this.id=e.id,this.unit=t.getSensorUnit(this.name),this.value=t.getSensorValue(e),this.prevValue=t.getSensorPrevValue(e),this.icon=t.getSensorIcon(this.name),this.arrow=t.getSensorArrow(this.value,this.prevValue),this.color=t.getSensorColor(this.name);var a=t.getSensorDescription(this.id,n);this.fullDescription=a,this.previewDescription=a.length>140?a.slice(0,140).concat(" ... "):a}return e}])}(),function(){"use strict";angular.module("app.components").factory("SearchResultLocation",["SearchResult",function(t){function e(e){t.call(this,e),this.lat=e.latitude,this.lng=e.longitude}return e}])}(),function(){"use strict";angular.module("app.components").factory("SearchResult",["searchUtils",function(t){function e(e){this.type=e.type,this.id=e.id,this.name=t.parseName(e),this.location=t.parseLocation(e),this.icon=t.parseIcon(e,this.type),this.iconType=t.parseIconType(this.type)}return e}])}(),function(){"use strict";angular.module("app.components").factory("Marker",["device","markerUtils",function(t,e){function n(t){this.lat=e.parseCoordinates(t).lat,this.lng=e.parseCoordinates(t).lng,this.message='<div class="popup"><div class="popup_top '+e.classify(e.parseType(t))+'"><p class="popup_name">'+e.parseName(t)+'</p><p class="popup_type">'+e.parseType(t)+'</p><p class="popup_time"><md-icon class="popup_icon" md-svg-src="./assets/images/update_icon.svg"></md-icon>'+e.parseTime(t)+'</p></div><div class="popup_bottom"><p class="popup_location"><md-icon class="popup_icon" md-svg-src="./assets/images/location_icon_dark.svg"></md-icon>'+e.parseLocation(t)+'</p><div class="popup_labels">'+a(e.parseLabels(t))+a(e.parseUserTags(t))+"</div></div></div>",this.icon=e.getIcon(e.parseLabels(t)),this.layer="realworld",this.focus=!1,this.myData={id:e.parseId(t),labels:e.parseLabels(t)}}function a(t){return _.reduce(t,function(t,e){return t.concat("<span>"+e+"</span>")},"")}return n}])}(),function(){"use strict";angular.module("app.components").factory("PreviewKit",["Kit",function(t){function e(e){t.call(this,e),this.dropdownOptions=[{text:"SET UP",value:"1",href:"kits/edit/"+this.id+"?step=2"},{text:"EDIT",value:"2",href:"kits/edit/"+this.id}]}return e.prototype=Object.create(t.prototype),e.prototype.constructor=t,e}])}(),function(){"use strict";angular.module("app.components").factory("Kit",["Sensor","kitUtils",function(t,e){function n(t){this.id=t.id,this.name=t.name,this.type=e.parseType(t),this.location=e.parseLocation(t),this.avatar=e.parseAvatar(t,this.type),this.labels=e.parseLabels(t),this.state=e.parseState(t),this.userTags=t.user_tags}return n}])}(),function(){"use strict";angular.module("app.components").factory("HasSensorKit",["Kit",function(t){function e(e){t.call(this,e),this.data=e.data.sensors,this.longitude=e.data.location.longitude,this.latitude=e.data.location.latitude}return e.prototype=Object.create(t.prototype),e.prototype.constructor=t,e.prototype.sensorsHasData=function(){var t=this.data.map(function(t){return t.value});return _.some(t,function(t){return!!t})},e}])}(),function(){"use strict";angular.module("app.components").factory("FullKit",["Kit","Sensor","kitUtils",function(t,e,n){function a(e){t.call(this,e),this.version=n.parseVersion(e),this.time=n.parseTime(e),this.timeParsed=this.time?moment(this.time).format("MMMM DD, YYYY - HH:mm"):"No time",this.timeAgo=this.time?moment(this.time).fromNow():"No time",this["class"]=n.classify(n.parseType(e)),this.description=e.description,this.owner=n.parseOwner(e),this.data=e.data.sensors,this.latitude=e.data.location.latitude,this.longitude=e.data.location.longitude,this.macAddress=e.mac_address,this.elevation=e.data.location.elevation}return a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.prototype.getSensors=function(t,n){var a=_(this.data).chain().map(function(n){return new e(n,t)}).tap(function(t){"compare"===n.type&&t.unshift({name:"NONE",color:"white",id:-1})}).value();return a.reduce(function(t,e,a,o){return"BATTERY"===e.name&&(o.splice(a,1),"main"===n.type?(t[0]=o,t[1]=e):"compare"===n.type&&(t=o)),t},[])},a}])}(),function(){"use strict";function t(){return{restrict:"A",scope:{},templateUrl:"app/core/animation/backdrop/noDataBackdrop.html",controller:["$scope",function(t){var e=this;e.kitWithoutData=!1,t.$on("kitWithoutData",function(t,n){e.kitWithoutData=!0,e.user=n.belongsToUser?"owner":"visitor"})}],controllerAs:"vm"}}angular.module("app.components").directive("noDataBackdrop",t),t.$inject=[]}(),function(){"use strict";function t(){return{templateUrl:"app/core/animation/backdrop/loadingBackdrop.html",controller:["$scope",function(t){var e=this;e.isViewLoading=!0,e.mapStateLoading=!1,t.$on("viewLoading",function(){e.isViewLoading=!0,angular.element("#doorbell-button").hide()}),t.$on("viewLoaded",function(){e.isViewLoading=!1,angular.element("#doorbell-button").show()}),t.$on("mapStateLoading",function(){e.isViewLoading||(e.mapStateLoading=!0)}),t.$on("mapStateLoaded",function(){e.mapStateLoading=!1})}],controllerAs:"vm"}}angular.module("app.components").directive("loadingBackdrop",t),t.$inject=[]}(),function(){"use strict";function t(t,e,n,a,o,i,s,r,l,c){function u(){l(function(){m(),c.viewLoaded()},500)}function d(t){"all"===t&&(t=void 0),p.status=t}function m(){var t=document.body.clientHeight/4*3;angular.element(".profile_content").css("min-height",t+"px")}var p=this,v=o,g=i;p.status=void 0,p.user=v,p.kits=g,p.filteredKits=[],p.filterKits=d,t.$on("loggedIn",function(){var t=parseInt(e.id),a=s.getCurrentUser().data;r.isAuthUser(t,a)&&n.path("/profile")}),u()}angular.module("app.components").controller("UserProfileController",t),t.$inject=["$scope","$stateParams","$location","utils","userData","kitsData","auth","userUtils","$timeout","animation"]}(),function(){"use strict";function t(){return{scope:{isLoggedin:"=logged"},restrict:"A",controller:"StoreController",controllerAs:"vm",templateUrl:"app/components/store/store.html"}}angular.module("app.components").directive("store",t)}(),function(){"use strict";function t(t,e){function n(){e.show({hasBackdrop:!0,controller:"StoreDialogController",templateUrl:"app/components/store/storeModal.html",clickOutsideToClose:!0})}t.showStore=n,t.$on("showStore",function(){n()})}angular.module("app.components").controller("StoreController",t),t.$inject=["$scope","$mdDialog"]}(),function(){"use strict";function t(){return{scope:{show:"="},restrict:"A",controller:"SignupController",controllerAs:"vm",templateUrl:"app/components/signup/signup.html"}}angular.module("app.components").directive("signup",t)}(),function(){"use strict";function t(t,e){function n(){e.show({hasBackdrop:!0,controller:"SignupDialogController",templateUrl:"app/components/signup/signupModal.html",clickOutsideToClose:!0})}var a=this;a.showSignup=n,t.$on("showSignup",function(){n()})}angular.module("app.components").controller("SignupController",t),t.$inject=["$scope","$mdDialog"]}(),function(){"use strict";function t(){return{scope:!0,restrict:"E",templateUrl:"app/components/search/search.html",controller:"SearchController",controllerAs:"vm"}}angular.module("app.components").directive("search",t)}(),function(){"use strict";function t(t,e,n,a,o,i){function s(){}function r(t){"User"===t.type?a.path("/users/"+t.id):"Device"===t.type?a.path("/kits/"+t.id):o.goToLocation({lat:t.lat,lng:t.lng,type:t.type})}function l(t){return t.length<3?[]:e.globalSearch(t).then(function(t){return 0===t.length?(angular.element(document.body).css("overflow","auto"),t):(angular.element(document.body).css("overflow","hidden"),t.map(function(t){return"City"===t.type||"Country"===t.type?new i(t):new n(t)}))})}var c=this;c.searchTextChange=s,c.selectedItemChange=r,c.querySearch=l,c.isIconWhite=!0,t.$on("removeNav",function(){t.$apply(function(){c.isIconWhite=!1})}),t.$on("addNav",function(){t.$apply(function(){c.isIconWhite=!0})})}angular.module("app.components").controller("SearchController",t),t.$inject=["$scope","search","SearchResult","$location","animation","SearchResultLocation"]}(),function(){"use strict";function t(){function t(t){console.log("sc",t)}function e(t){function e(t){return new Date(t).getTime()}function n(){return e(new Date)}function a(){return e(n()-6048e5)}console.log("vm l",t);var o="single",i=angular.element("#picker_from").pickadate({onClose:function(){angular.element(document.activeElement).blur()},container:"body",klass:{holder:"picker__holder picker_container"}}),s=i.pickadate("picker"),r=angular.element("#picker_to").pickadate({onClose:function(){angular.element(document.activeElement).blur()},container:"body",klass:{holder:"picker__holder picker_container"}}),l=r.pickadate("picker");s.get("value")&&l.set("min",s.get("select")),l.get("value")&&s.set("max",l.get("select")),s.on("set",function(t){if(t.select){if(l.get("value")&&"single"===o){var e=[mainSensorID,compareSensorID];e=e.filter(function(t){return t}),changeChart(e,{from:s.get("value"),to:l.get("value")})}l.set("min",s.get("select"))}else"clear"in t&&l.set("min",!1)}),l.on("set",function(t){if(t.select){if(s.get("value")){var e=[mainSensorID,compareSensorID];e=e.filter(function(t){return t}),changeChart(e,{from:s.get("value"),to:l.get("value")})}s.set("max",l.get("select"))}else"clear"in t&&s.set("max",!1)}),l.set("max",new Date),s.set("select",a()),l.set("select",n());var c={getValuePickerFrom:function(){return s.get("value")},setValuePickerFrom:function(t){o="single",s.set("select",t)},getValuePickerTo:function(){return l.get("value")},setValuePickerTo:function(t){o="single",l.set("select",t)},setValuePickers:function(t){var e=t[0],n=t[1];o="pair",s.set("select",e),l.set("select",n)}};_.extend($scope,c)}return t.$inject=["$scope"],{restrict:"A",link:e,controller:t,controllerAs:"vm"}}angular.module("app.components").directive("picker",t),t.$inject=[]}(),function(){"use strict";function t(t,e,n,a,o){function i(){s()}function s(){o.getResetPassword(e.code).then(function(){l.showForm=!0})["catch"](function(){a.error("Wrong url"),n.path("/")})}function r(t){return l.waitingFromServer=!0,l.errors=void 0,t.newPassword!==t.confirmPassword?void(l.isDifferent=!0):(l.isDifferent=!1,void o.patchResetPassword(e.code,{password:t.newPassword}).then(function(){a.success("Your data was updated successfully"),n.path("/profile")})["catch"](function(t){a.error("Your data wasn't updated"),l.errors=t.data.errors})["finally"](function(){l.waitingFromServer=!1}))}var l=this;l.showForm=!1,l.form={},l.isDifferent=!1,l.answer=r,i()}angular.module("app.components").controller("PasswordResetController",t),t.$inject=["$mdDialog","$stateParams","$location","alert","auth"]}(),function(){"use strict";function t(t,e,n){function a(){o.waitingFromServer=!0,o.errors=void 0;var a={username:o.username};t.recoverPassword(a).then(function(){e.success("You were sent an email to recover your password"),n.hide()})["catch"](function(t){o.errors=t.data.errors,o.errors&&e.error("That email/username doesn't exist")})["finally"](function(){o.waitingFromServer=!1})}var o=this;o.waitingFromServer=!1,o.errors=void 0,o.recoverPassword=a}angular.module("app.components").controller("PasswordRecoveryController",t),t.$inject=["auth","alert","$mdDialog"]}(),function(){"use strict";function t(t,e,n,a,o,i,s,r,l,c,u,d,m,p,v,g){function f(){u(function(){w(0),T(),p.viewLoaded()},500)}function h(t){"all"===t&&(t=void 0),$.kitStatus=t}function k(t){"all"===t&&(t=void 0),$.toolType=t}function y(t){t.country&&_.each(c,function(e,n){return e===t.country?void(t.country_code=n):void 0}),i.updateUser(t).then(function(t){var e=new o(t);_.extend($.user,e),$.errors={},l.success("User updated")})["catch"](function(t){l.error("User could not be updated "),$.errors=t.data.errors})}function b(){var t=g.alert().title("Delete your account?").content("If you wish to remove you account completely, please contact our support team at support@smartcitizen.me").ariaLabel("").ok("OK!").theme("primary").clickOutsideToClose(!0);g.show(t)}function w(t){var e=angular.element(".myProfile_tab_icon");_.each(e,function(t){S(t)});var n=e[t];angular.element(n).find(".stroke_container").css({stroke:"white","stroke-width":"0.01px"}),angular.element(n).find(".fill_container").css("fill","white")}function S(t){t=angular.element(t),t.find(".stroke_container").css({stroke:"none"}),t.find(".fill_container").css("fill","#82A7B0")}function T(){var t=document.body.clientHeight/4*3;angular.element(".profile_content").css("min-height",t+"px")}function C(t){return _.filter(c,L(t))}function L(t){return t=t.toLowerCase(),function(e){return e=e.toLowerCase(),-1!==e.indexOf(t)}}function I(t){t&&t.length&&d.getCredentials(t[0].name).then(function(e){d.uploadFile(t[0],e.key,e.policy,e.signature).success(function(){$.user.avatar=d.getImageURL(e.key)})})}function P(t,e){var n={username:!0,email:!0,city:!0,country:!0,country_code:!0,website:!0,constructor:!1};for(var a in e)n[a]&&(t[a]=e[a])}var $=this;$.highlightIcon=w,$.unhighlightIcon=S,$.formUser={},$.getCountries=C,$.user=n,P($.formUser,$.user),$.searchText=$.formUser.country,$.updateUser=y,$.removeUser=b,$.uploadAvatar=I,$.kits=a,$.kitStatus=void 0,$.filteredKits=[],$.dropdownSelected=void 0,$.dropdownOptions=v,$.tools=m,$.toolType=void 0,$.filteredTools=[],$.filterKits=h,$.filterTools=k,t.$on("loggedOut",function(){e.path("/")}),f()}angular.module("app.components").controller("MyProfileController",t),t.$inject=["$scope","$location","userData","kitsData","AuthUser","user","auth","utils","alert","COUNTRY_CODES","$timeout","file","PROFILE_TOOLS","animation","DROPDOWN_OPTIONS_KIT","$mdDialog"]}(),function(){"use strict";function t(t,e,n,a,o,i,s,r,l,c,u){function d(){m()}function m(){var t=_.every(T.filterData,function(t){return t});T.allFiltersSelected=t?!0:!1}function p(){s.show({hasBackdrop:!0,controller:"MapFilterDialogController",templateUrl:"app/components/map/mapFilterPopup.html",clickOutsideToClose:!0,locals:{filterData:T.filterData,defaultFiltersFromController:$}}).then(function(t){_.extend(T.filterData,t.data),_.extend($,t.defaultFilters),f(t.data),m(),n(function(){h()})})}function v(t){l.canFilterBeRemoved(T.filterData,t)&&(T.filterData[t]=!1,_.extend($,l.setDefaultFilters(T.filterData,$)),f(T.filterData),m(),n(function(){h()}))}function g(t){return o.filter(function(e){var n=e.myData.labels;return _.every(n,function(e){return t[e]})})}function f(e){T.markers=[],n(function(){t.$apply(function(){T.markers=g(e)})})}function h(){return r.getMarkers().then(function(t){return r.getLayers().then(function(e){var n=k(e,t);n||r.getMap().then(function(){var n=L.latLng(T.center.lat,T.center.lng),a=_.reduce(t,function(t,e){var a=n.distanceTo(e.getLatLng()),o=n.distanceTo(t.getLatLng());return o>a?e:t},t[0]);a?b(e,a):u.info("No markers found with those filters",5e3)})})})}function k(t,e){var n=t.overlays.realworld._currentShownBounds;return _.some(e,function(t){return y(n,t)})}function y(t,e){return t.contains(e.getLatLng())}function b(t,e){var a=t.overlays.realworld._currentShownBounds;y(a,e)||(w(),r.getLayers().then(function(t){n(function(){b(t,e)})}))}function w(){0!==T.center.zoom&&(T.center.zoom=T.center.zoom-3)}var S,T=this,C=o[0],I=_.indexBy(o,function(t){return t.myData.id}),P=I[parseInt(e.params.id)].myData.id;T.markers=I,T.tiles={url:"https://api.tiles.mapbox.com/v4/mapbox.streets-basic/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidG9tYXNkaWV6IiwiYSI6ImRTd01HSGsifQ.loQdtLNQ8GJkJl2LUzzxVg"},T.layers={baselayers:{osm:{name:"OpenStreetMap",type:"xyz",url:"https://api.tiles.mapbox.com/v4/mapbox.streets-basic/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidG9tYXNkaWV6IiwiYSI6ImRTd01HSGsifQ.loQdtLNQ8GJkJl2LUzzxVg"}},overlays:{realworld:{name:"Devices",type:"markercluster",visible:!0,layerOptions:{showCoverageOnHover:!1}}}},T.center={lat:C.lat,lng:C.lng,zoom:12},T.defaults={dragging:!0,touchZoom:!0,scrollWheelZoom:!1,doubleClickZoom:!0},T.events={map:{enable:["dragend","zoomend","moveend","popupopen","popupclose","mousedown","dblclick","click","touchstart"],logic:"broadcast"}},t.$on("leafletDirectiveMarker.click",function(t,a){var o=a.leafletEvent.target.options.myData.id;if(T.kitLoading=!0,T.center.lat=a.leafletEvent.latlng.lat,T.center.lng=a.leafletEvent.latlng.lng,o===parseInt(e.params.id))return void n(function(){T.kitLoading=!1},0);P=a.leafletEvent.target.options.myData.id,S="map";var o=a.leafletEvent.target.options.myData.id;e.go("layout.home.kit",{id:o})}),t.$on("leafletDirectiveMarker.popupclose",function(){if(P){var t=T.markers[P];t&&(T.markers[P].focus=!1)}}),t.$on("kitLoaded",function(e,a){return T.kitLoading=!1,"map"===S?void(S=void 0):(T.center.lat=a.lat,T.center.lng=a.lng,void n(function(){r.getMarkers().then(function(e){var n=_.find(e,function(t){return a.id===t.options.myData.id});r.getLayers().then(function(e){e.overlays.realworld.zoomToShowLayer(n,function(){var e=T.markers[a.id];e&&(e.focus=!0),t.$$phase||t.$digest()})})})},3e3))}),t.$on("goToLocation",function(t,e){T.center.lat=e.lat,T.center.lng=e.lng,T.center.zoom="City"===e.type?8:5});var $={exposure:null,status:null};T.filterData={indoor:!0,outdoor:!0,online:!0,offline:!0},T.openFilterPopup=p,T.removeFilter=v,d()}angular.module("app.components").controller("MapController",t),t.$inject=["$scope","$state","$timeout","location","markers","device","$mdDialog","leafletData","mapUtils","markerUtils","alert"]}(),function(){"use strict";function t(){return{scope:{show:"="},restrict:"A",controller:"LoginController",controllerAs:"vm",templateUrl:"app/components/login/login.html"}}angular.module("app.components").directive("login",t)}(),function(){"use strict";function t(t,e){function n(){e.show({hasBackdrop:!0,controller:"LoginDialogController",templateUrl:"app/components/login/loginModal.html",clickOutsideToClose:!0})}t.showLogin=n,t.$on("showLogin",function(){n()})}angular.module("app.components").controller("LoginController",t),t.$inject=["$scope","$mdDialog"]}(),function(){"use strict";function t(t,e,n,a,o,i,s,r){function l(){i(function(){var e=t.search();e.signup?o.showSignup():e.login?o.showLogin():e.passwordRecovery&&o.showPasswordRecovery()},1e3)}function c(){a.logout(),u.isLoggedin=!1}var u=this;u.navRightLayout="space-around center",n.$on("loggedIn",function(){u.isLoggedin=!0,u.isShown=!0,angular.element(".nav_right .wrap-dd-menu").css("display","initial"),u.currentUser=a.getCurrentUser().data,u.dropdownOptions[0].text="Hello, "+u.currentUser.username,u.navRightLayout="end center",n.$$phase||n.$digest()}),n.$on("loggedOut",function(){u.isLoggedIn=!1,u.isShown=!0,angular.element("navbar .wrap-dd-menu").css("display","none"),u.navRightLayout="space-around center"}),u.isShown=!0,u.isLoggedin=!1,u.logout=c,u.dropdownOptions=r,u.dropdownSelected=void 0,u.dropdownOptionsCommunity=s,u.dropdownSelectedCommunity=void 0,n.$on("removeNav",function(){n.$apply(function(){u.isShown=!1})}),n.$on("addNav",function(){n.$apply(function(){u.isShown=!0})}),l()}angular.module("app.components").controller("LayoutController",t),t.$inject=["$location","$state","$scope","auth","animation","$timeout","DROPDOWN_OPTIONS_COMMUNITY","DROPDOWN_OPTIONS_USER"]}(),function(){"use strict";function t(){}angular.module("app.components").controller("HomeController",t)}(),function(){"use strict";function t(t,e){t.hide=function(){e.hide()}}angular.module("app.components").controller("StoreDialogController",t),t.$inject=["$scope","$mdDialog"]}(),function(){"use strict";function t(t,e,n,a,o){t.answer=function(o){t.waitingFromServer=!0,n.createUser(o).then(function(){a.success("Signup was successful"),e.hide()})["catch"](function(e){a.error("Signup failed"),t.errors=e.data.errors})["finally"](function(){t.waitingFromServer=!1})},t.hide=function(){e.hide()},t.cancel=function(){e.cancel()},t.openLogin=function(){o.showLogin(),e.hide()}}angular.module("app.components").controller("SignupDialogController",t),t.$inject=["$scope","$mdDialog","user","alert","animation"]}(),function(){"use strict";function t(t,e,n,a,o,i){t.password={newPassword:void 0,confirmPassword:void 0},t.isDifferent=!1,t.answer=function(s){return s.newPassword!==s.confirmPassword?void(t.isDifferent=!0):(t.isDifferent=!1,void o.patchResetPassword(n.code,{password:s.newPassword}).then(function(){i.success("Your data was updated successfully"),a.path("/profile"),e.hide()})["catch"](function(){i.error("Your data wasn't updated")}))},t.cancel=function(){e.hide()},t.hide=function(){e.hide()}}angular.module("app.components").controller("PasswordResetDialogController",t),t.$inject=["$scope","$mdDialog","$stateParams","$location","auth","alert"]}(),function(){"use strict";function t(t,e,n,a,o){t.hide=function(){n.hide()},t.cancel=function(){n.cancel()},t.recoverPassword=function(){t.waitingFromServer=!0;var e={email_or_username:t.input};a.recoverPassword(e).then(function(){o.success("You were sent an email to recover your password"),n.hide()})["catch"](function(e){o.error("That username doesn't exist"),t.errors=e.data})["finally"](function(){t.waitingFromServer=!1})},t.openSignup=function(){e.showSignup(),n.hide()}}angular.module("app.components").controller("PasswordRecoveryDialogController",t),t.$inject=["$scope","animation","$mdDialog","auth","alert"]}(),function(){"use strict";function t(t,e,n,a,o){var i={exposure:null,status:null};t.form={indoor:!1,outdoor:!1,online:!1,offline:!1},_.extend(t.form,n),_.extend(i,a),t.answer=function(n){n||(n=_.each(t.form,function(t,e,n){n[e]=!0
}));var a={data:n,defaultFilters:i};e.hide(a)},t.hide=function(){e.hide()},t.cancel=function(){e.hide()},t.applyFilterRules=function(){_.extend(t.form,o.getDefaultFilters(t.form,i)),_.extend(i,o.setDefaultFilters(t.form,i))}}angular.module("app.components").controller("MapFilterDialogController",t),t.$inject=["$scope","$mdDialog","filterData","defaultFiltersFromController","mapUtils"]}(),function(){"use strict";function t(t,e,n,a,o){t.answer=function(o){t.waitingFromServer=!0,n.login(o).then(function(t){var a=t.access_token;n.saveData(a),e.hide()})["catch"](function(){a.error("Username or password incorrect")})["finally"](function(){t.waitingFromServer=!1})},t.hide=function(){e.hide()},t.cancel=function(){e.hide()},t.openSignup=function(){o.showSignup(),e.hide()},t.openPasswordRecovery=function(){e.show({hasBackdrop:!0,controller:"PasswordRecoveryDialogController",templateUrl:"app/components/passwordRecovery/passwordRecoveryModal.html",clickOutsideToClose:!0}),e.hide()}}angular.module("app.components").controller("LoginDialogController",t),t.$inject=["$scope","$mdDialog","auth","alert","animation"]}(),function(){"use strict";function t(t,e,n,a){function o(t,o){n(function(){i(o[0])},0);var r={};angular.element(a).on("resize",function(){i(o[0]),s(r.data,{type:r.type,container:o[0],color:r.color,unit:r.unit})}),t.$watch("chartData",function(t){if(t&&void 0!==t){if(t[0]&&t[1]){var n=t[0].data,a=n.map(function(t){return{date:T(t.time),count:t&&t.count,value:t&&t.value}});a.sort(function(t,e){return t.date-e.date});var i=t[1].data,l=i.map(function(t){return{date:T(t.time),count:t&&t.count,value:t&&t.value}});l.sort(function(t,e){return t.date-e.date});var c=[a,l],u=[t[0].color,t[1].color],d=[t[0].unit,t[1].unit];r={data:c,type:"both",color:u,unit:d},s(c,{type:"both",container:o[0],color:u,unit:d})}else if(t[0]){var m=t[0].data,c=m.map(function(t){return{date:T(t.time),count:t&&t.count,value:t&&t.value}});c.sort(function(t,e){return t.date-e.date});var p=t[0].color,v=t[0].unit;r={data:c,type:"main",color:p,unit:v},s(c,{type:"main",container:o[0],color:p,unit:v})}e.hideChartSpinner()}})}function i(t){d3.select(t).selectAll("*").remove(),v={top:20,right:15,bottom:20,left:40},g=t.clientWidth-v.left-v.right,f=t.clientHeight-v.top-v.bottom,_=d3.time.scale.utc().range([0,g]),k=d3.scale.linear().range([f,0]),y=d3.scale.linear().range([f,0]),O=d3.scale.linear().range([f,0]),T=d3.time.format.utc("%Y-%m-%dT%H:%M:%SZ").parse,b=d3.svg.axis().scale(_).orient("bottom").ticks(5),w=d3.svg.axis().scale(k).orient("left").ticks(5),S=d3.svg.axis().scale(y).orient("right").ticks(5),C=d3.svg.area().interpolate("linear").x(function(t){return _(t.date)}).y0(f).y1(function(t){return k(t.count)}),L=d3.svg.line().interpolate("linear").x(function(t){return _(t.date)}).y(function(t){return k(t.count)}),I=d3.svg.area().interpolate("linear").x(function(t){return _(t.date)}).y0(f).y1(function(t){return y(t.count)}),P=d3.svg.line().interpolate("linear").x(function(t){return _(t.date)}).y(function(t){return y(t.count)}),h=d3.select(t).append("svg").attr("width",g+v.left+v.right).attr("height",f+v.top+v.bottom).append("g").attr("transform","translate("+(v.left-v.right)+","+v.top+")")}function s(t,e){"main"===e.type?r(t,e):"both"===e.type&&l(t,e)}function r(t,e){function n(){var n=d3.bisector(function(t){return t.date}).left,a=_.invert(d3.mouse(this)[0]),o=n(t,a,1),i=t[o-1],s=t[o],r=a-i.date>s.date-a?s:i;D.attr("transform","translate("+_(r.date)+", "+k(r.count)+")");var l=x.select("text"),c=l.select(".popup_main"),u=(c.select(".popup_value").text(d(r.value)),c.select(".popup_unit").text(e.unit),l.select(".popup_date").text(m(r.date))),v=[c,u],g=p(A,v);_(r.date)+80+g>e.container.clientWidth?x.attr("transform","translate("+(_(r.date)-120)+", "+(d3.mouse(this)[1]-20)+")"):x.attr("transform","translate("+(_(r.date)+80)+", "+(d3.mouse(this)[1]-20)+")")}_.domain(d3.extent(t,function(t){return t.date})),k.domain([.8*d3.min(t,function(t){return t.count}),1.2*d3.max(t,function(t){return t.count})]),h.selectAll("*").remove(),h.append("path").datum(t).attr("class","chart_area").attr("fill",e.color).attr("d",C),h.append("path").attr("class","chart_line").attr("stroke",e.color).attr("d",L(t)),h.append("g").attr("class","axis x").attr("transform","translate(0,"+f+")").call(b),h.append("g").attr("class","axis y_left").style("fill",e.color).call(w),h.append("g").attr("class","grid").attr("transform","translate(0,"+f+")").call(c().tickSize(-f,0,0).tickFormat("")),h.append("g").attr("class","grid").call(u().tickSize(-g,0,0).tickFormat("")),D=h.append("g").attr("class","focus").style("display","none"),D.append("circle").style("stroke",e.color).attr("r",4.5);var a=84,o=46;x=h.append("g").attr("class","focus").style("display","none"),A=x.append("rect").attr("width",a).attr("height",o).attr("transform",function(){var t="translate(-42, 5)";return t}).style("stroke","grey").style("stroke-width","0.5").style("fill","white");var i=x.append("text").attr("class",""),s=i.append("tspan").attr("class","popup_main").attr("text-anchor","start").attr("x",-a/2).attr("dx",8).attr("y",o/2).attr("dy",3);s.append("tspan").attr("class","popup_value"),s.append("tspan").attr("class","popup_unit").attr("dx",5),i.append("tspan").attr("class","popup_date").attr("x",-a/2).attr("dx",8).attr("y",o-2).attr("dy",0).attr("text-anchor","start"),h.append("rect").attr("class","overlay").attr("width",g).attr("height",f).on("mouseover",function(){x.style("display",null),D.style("display",null)}).on("mouseout",function(){x.style("display","none"),D.style("display","none")}).on("mousemove",n)}function l(t,e){function n(){var n=d3.bisector(function(t){return t.date}).left,a=_.invert(d3.mouse(this)[0]),o=n(t[1],a,1),i=t[1][o-1],s=t[1][o],r=a-i.date>s.date-a?s:i;$.attr("transform","translate("+_(r.date)+", "+y(r.count)+")");var l=t[0][o-1],c=t[0][o],u=a-l.date>c.date-a?c:l;D.attr("transform","translate("+_(u.date)+", "+k(u.count)+")");var v=x.select("text"),g=v.select(".popup_main");g.select(".popup_value").text(d(u.value)),g.select(".popup_unit").text(e.unit[0]);var f=v.select(".popup_compare");f.select(".popup_value").text(d(r.value)),f.select(".popup_unit").text(e.unit[1]);var h=v.select(".popup_date").text(m(r.date)),b=[g,f,h],w=p(A,b);_(r.date)+80+w>e.container.clientWidth?x.attr("transform","translate("+(_(r.date)-120)+", "+(d3.mouse(this)[1]-20)+")"):x.attr("transform","translate("+(_(r.date)+80)+", "+(d3.mouse(this)[1]-20)+")")}_.domain(d3.extent(t[0],function(t){return t.date})),k.domain([.8*d3.min(t[0],function(t){return t.count}),1.2*d3.max(t[0],function(t){return t.count})]),y.domain([.8*d3.min(t[1],function(t){return t.count}),1.2*d3.max(t[1],function(t){return t.count})]),h.selectAll("*").remove(),h.append("path").datum(t[0]).attr("class","chart_area").attr("fill",e.color[0]).attr("d",C),h.append("path").datum(t[1]).attr("class","chart_area").attr("fill",e.color[1]).attr("d",I),h.append("path").attr("class","chart_line").attr("stroke",e.color[0]).attr("d",L(t[0])),h.append("path").attr("class","chart_line").attr("stroke",e.color[1]).attr("d",P(t[1])),h.append("g").attr("class","axis x").attr("transform","translate(0,"+f+")").call(b),h.append("g").attr("class","axis y_left").style("fill",e.color[0]).call(w),h.append("g").attr("class","axis y_right").style("fill",e.color[1]).attr("transform","translate("+g+" ,0)").call(S),h.append("g").attr("class","grid").attr("transform","translate(0,"+f+")").call(c().tickSize(-f,0,0).tickFormat("")),h.append("g").attr("class","grid").call(u().tickSize(-g,0,0).tickFormat("")),$=h.append("g").attr("class","focus").style("display","none"),D=h.append("g").attr("class","focus").style("display","none"),$.append("circle").style("stroke",e.color[1]).attr("r",4.5),D.append("circle").style("stroke",e.color[0]).attr("r",4.5);var a=84,o=75;x=h.append("g").attr("class","focus").style("display","none"),A=x.append("rect").attr("width",a).attr("height",o).style("min-width","40px").attr("transform",function(){var t="translate(-42, 5)";return t}).style("stroke","grey").style("stroke-width","0.5").style("fill","white"),x.append("rect").attr("width",8).attr("height",2).attr("transform",function(){return"translate("+(-a/2+4).toString()+", 20)"}).style("fill",e.color[0]),x.append("rect").attr("width",8).attr("height",2).attr("transform",function(){return"translate("+(-a/2+4).toString()+", 45)"}).style("fill",e.color[1]);var i=x.append("text").attr("class",""),s=i.append("tspan").attr("class","popup_main").attr("x",-o/2+7).attr("dx",8).attr("y",o/3).attr("dy",3);s.append("tspan").attr("class","popup_value").attr("text-anchor","start"),s.append("tspan").attr("class","popup_unit").attr("dx",5);var r=i.append("tspan").attr("class","popup_compare").attr("x",-o/2+7).attr("dx",8).attr("y",o/1.5).attr("dy",3);r.append("tspan").attr("class","popup_value").attr("text-anchor","start"),r.append("tspan").attr("class","popup_unit").attr("dx",5),i.append("tspan").attr("class","popup_date").attr("x",-a/2).attr("dx",8).attr("y",o-2).attr("dy",0).attr("text-anchor","start"),h.append("rect").attr("class","overlay").attr("width",g).attr("height",f).on("mouseover",function(){$.style("display",null),D.style("display",null),x.style("display",null)}).on("mouseout",function(){$.style("display","none"),D.style("display","none"),x.style("display","none")}).on("mousemove",n)}function c(){return d3.svg.axis().scale(_).orient("bottom").ticks(5)}function u(){return d3.svg.axis().scale(k).orient("left").ticks(5)}function d(t){if(null===t)return"No data";if(-1!==t.toString().indexOf(".")){var e=t.toString().split(".");return e[0]+"."+e[1].slice(0,2)}return t.toString().slice(0,2)}function m(t){return moment(t).format("h:mm a ddd Do MMM YYYY")}function p(t,e){function n(t){var e,n=t.node();return e=n.getComputedTextLength?n.getComputedTextLength():n.getBoundingClientRect?n.getBoundingClientRect().width:n.getBBox().width}if(e.length){var a=e.reduce(function(t,e){var a=n(e),o=n(t);return o>=a?t:e},e[0]),o=2*a.attr("dx");return t.attr("width",n(a)+o),n(a)+o}}var v,g,f,h,_,k,y,b,w,S,T,C,L,I,P,$,D,x,O,A;return{link:o,restrict:"A",scope:{chartData:"="}}}angular.module("app.components").directive("chart",t),t.$inject=["sensor","animation","$timeout","$window"]}(),function(){"use strict";function t(t){function e(t){r("success",t)}function n(t){r("error",t)}function a(){s("Woha! This kit has still not published any data yet. Leave a comment to its owner to make him/ her know",1e4,{button:"Leave comment",href:"#disqus_thread"})}function o(t){s("Woha! This kit has still not published any data yet. Please, check its settings or reach the support team",1e4,{button:"Kit settings",href:"/kits/edit/"+t})}function i(){s("😅 It looks like this post has not posted any data since long time ago. Leave a comment to its owner to make him/ her know",1e4,{button:!0})}function s(t,e,n){n.button?r("infoButton",t,n,void 0,e):r("info",t,n,void 0,e)}function r(e,n,a,o,i){o=void 0===o?"top":o,i=void 0===i?5e3:i,t.show({controller:"AlertController",controllerAs:"vm",templateUrl:"app/components/alert/alert"+e+".html",hideDelay:i,position:o,locals:{message:n,button:a&&a.button,href:a&&a.href}})}var l={success:e,error:n,info:{noData:{visitor:a,owner:o},longTime:i,generic:s}};return l}angular.module("app.components").factory("alert",t),t.$inject=["$mdToast"]}(),function(){"use strict";function t(t,e,n,a,o){function i(){e.hide()}var s=this;s.close=i,s.message=n,s.button=a,s.href=o,t.$on("hideAlert",function(){i()})}angular.module("app.components").controller("AlertController",t),t.$inject=["$scope","$mdToast","message","button","href"]}(),function(){"use strict";function t(t,e,n){function a(t){var e={kitName:t.device.name,kitType:s(t),kitLastTime:moment(l(t)).fromNow(),kitLocation:o(t),kitLabels:i(t),kitClass:r(s(t))};return e}function o(t){var e="",n=t.data.location.city,a=t.data.location.country;return n&&(e+=n),a&&(e+=", "+a),e}function i(t){return{status:t.status,exposure:t.data.location.exposure}}function s(t){var e,n=t.kit?t.kit.name:"No kit property";return e=new RegExp("sck","i").test(n)?"SmartCitizen Kit":"Unknown Kit"}function r(t){return t?t.toLowerCase().split(" ").join("_"):""}function l(t){return t.updated_at}function c(t){return moment(t.recorded_at).format("")}function u(t){return moment(t).format("YYYY-MM-DDThh:mm:ss")+"Z"}function d(a){var o=n.defer(),i=0,s=[];return a.forEach(function(n,r){t.getDevice(n).then(function(t){s[r]=new e(t),i++,a.length===i&&o.resolve(s)})}),o.promise}var m={parseKit:a,parseKitTime:l,parseSensorTime:c,convertTime:u,getOwnerKits:d};return m}angular.module("app.components").factory("utils",t),t.$inject=["device","PreviewKit","$q"]}(),function(){"use strict";function t(){function t(t){return"admin"===t.role}function e(t,e){return t===e.id}var n={isAdmin:t,isAuthUser:e};return n}angular.module("app.components").factory("userUtils",t)}(),function(){"use strict";function t(){function t(t,e){if(!e)return t;var n;return"ms"===e?n=t:"s"===e?n=t/1e3:"m"===e?n=t/1e3/60:"h"===e?n=t/1e3/60/60:"d"===e&&(n=t/1e3/60/60/24),n}function e(t){return new Date(t).getTime()}function n(t,e){return moment(e).diff(moment(t),"days")}function a(n,a){return n=e(n),t(n,a)}function o(){return(new Date).getTime()}function i(){return e(o()-6048e5)}function s(t,e){return t=moment(t),e=moment(e),t.startOf("day").isSame(e.startOf("day"))?!0:!1}function r(t){var e=moment().subtract(15,"minutes").valueOf();return t=moment(t).valueOf(),t>e}function l(t){var e=moment().subtract(1,"months").valueOf();return t=moment(t).valueOf(),t>e}function c(t,e,n){var a=moment().subtract(t,e).valueOf();return n=moment(n).valueOf(),n>a}var u={getSecondsFromDate:e,getCurrentRange:n,getToday:o,getSevenDaysAgo:i,getDateIn:t,parseTime:a,isSameDay:s,isWithin15min:r,isWithin1Month:l,isWithin:c};return u}angular.module("app.components").factory("timeUtils",t)}(),function(){"use strict";function t(t){function e(e,n){var a,o=t.getCurrentRange(e,n,{format:"d"});return 1>=o?a="10m":7>=o?a="1h":o>7&&(a="1d"),a}function n(t){var e,n=t.name,a=t.description;return e=new RegExp("custom circuit","i").test(a)?n:new RegExp("noise","i").test(a)?"SOUND":new RegExp("light","i").test(a)?"LIGHT":new RegExp("wifi","i").test(a)?"NETWORKS":new RegExp("co","i").test(a)?"CO":new RegExp("no2","i").test(a)?"NO2":a,e.toUpperCase()}function a(t){var e;switch(t){case"TEMPERATURE":e="°C";break;case"LIGHT":e="LUX";break;case"SOUND":e="DB";break;case"HUMIDITY":case"BATTERY":e="%";break;case"CO":case"NO2":e="KΩ";break;case"NETWORKS":e="#";break;case"SOLAR PANEL":e="V";break;default:e="N/A"}return e}function o(t){var e=t.value;return isNaN(parseInt(e))?e="N/A":(e=e.toString(),-1!==e.indexOf(".")&&(e=e.slice(0,e.indexOf(".")+3))),e}function i(t){var e=t.prev_value;return e&&e.toString()||0}function s(t){switch(t){case"TEMPERATURE":return"./assets/images/temperature_icon.svg";case"HUMIDITY":return"./assets/images/humidity_icon.svg";case"LIGHT":return"./assets/images/light_icon.svg";case"SOUND":return"./assets/images/sound_icon.svg";case"CO":return"./assets/images/co_icon.svg";case"NO2":return"./assets/images/no2_icon.svg";case"NETWORKS":return"./assets/images/networks_icon.svg";case"BATTERY":return"./assets/images/battery_icon.svg";case"SOLAR PANEL":return"./assets/images/solar_panel_icon.svg";default:return"./assets/images/avatar.svg"}}function r(t,e){return t=parseInt(t)||0,e=parseInt(e)||0,t>e?"./assets/images/arrow_up_icon.svg":e>t?"./assets/images/arrow_down_icon.svg":"./assets/images/equal_icon.svg"}function l(t){switch(t){case"TEMPERATURE":return"#ffc107";case"HUMIDITY":return"#4fc3f7";case"LIGHT":return"#ffee58";case"SOUND":return"#f06292";case"CO":return"#4caf50";case"NO2":return"#8bc34a";case"NETWORKS":return"#9575cd";case"SOLAR PANEL":return"#fff9c4";default:return"black"}}function c(t,e){return _(e).chain().find(function(e){return e.id===t}).value().measurement.description}var u={getRollup:e,getSensorName:n,getSensorUnit:a,getSensorValue:o,getSensorPrevValue:i,getSensorIcon:s,getSensorArrow:r,getSensorColor:l,getSensorDescription:c};return u}angular.module("app.components").factory("sensorUtils",t),t.$inject=["timeUtils"]}(),function(){"use strict";function t(){function t(t){var e="";return t.city&&(e+=t.city),t.city&&t.country&&(e+=", "),t.country&&(e+=t.country),e}function e(t){var e="User"===t.type?t.username:t.name;return e}function n(t,e){switch(e){case"User":return t.avatar;case"Device":return"assets/images/kit.svg";case"Country":case"City":return"assets/images/location_icon_normal.svg"}}function a(t){switch(t){case"Device":return"div";default:return"img"}}var o={parseLocation:t,parseName:e,parseIcon:n,parseIconType:a};return o}angular.module("app.components").factory("searchUtils",t),t.$inject=[]}(),function(){"use strict";function t(t,e,n,a){function o(e){var n,a=t.getGenericKitData(),o=a[e.kit_id],i=o?o.name:"No name";return n=new RegExp("sck","i").test(i)?"SmartCitizen Kit":"Unknown Kit"}function i(t){var e="",a=t.city,o=t.country_code,i=n[o];return a&&(e+=a),i&&(e+=", "+i),e}function s(t){return t.system_tags}function r(t){return t.user_tags}function l(t){return{lat:t.latitude,lng:t.longitude}}function c(t){return t.id}function u(t){var e;return e=d(t,"offline")?a.markerSmartCitizenOffline:a.markerSmartCitizenOnline}function d(t,e){return _.some(t,function(t){return t===e})}function m(t){return t.name?t.name.length<=41?t.name:t.name.slice(0,35).concat(" ... "):void 0}function p(t){var e=t.data&&t.data[""];return e?moment(e).fromNow():"No time"}function v(t,e){var n=t.icon.className;if("active"===e)t.icon=a[n+"Active"],t.focus=!0;else if("inactive"===e){var o=n.split(" ")[0];t.icon=a[o]}return t}var g={parseType:o,parseLocation:i,parseLabels:s,parseUserTags:r,parseCoordinates:l,parseId:c,getIcon:u,parseName:m,parseTime:p,getMarkerIcon:v};return _.defaults(g,e),g}angular.module("app.components").factory("markerUtils",t),t.$inject=["device","kitUtils","COUNTRY_CODES","MARKER_ICONS"]}(),function(){"use strict";function t(){function t(t,e){var n={};return t.indoor||t.outdoor||(n[e.exposure]=!0),t.online||t.offline||(n[e.status]=!0),n}function e(t){var e={};return t.indoor&&t.outdoor||(e.exposure=t.indoor?"indoor":"outdoor"),t.online&&t.offline||(e.status=t.online?"online":"offline"),e}function n(t,e){return"indoor"===e||"outdoor"===e?t.indoor&&t.outdoor:"online"===e||"offline"===e?t.online&&t.offline:void 0}var a={getDefaultFilters:t,setDefaultFilters:e,canFilterBeRemoved:n};return a}angular.module("app.components").factory("mapUtils",t),t.$inject=[]}(),function(){"use strict";function t(t){function e(t){var e="",n=t.data.location.city,a=t.data.location.country;return n&&(e+=n),a&&(e+=", "+a),e}function n(t){return t.system_tags}function a(t){return t.user_tags}function o(t){var e,n=t.kit?t.kit.name:"No kit property";return e=new RegExp("sck","i").test(n)?"SmartCitizen Kit":"Unknown Kit"}function i(t){return t?t.toLowerCase().split(" ").join("_"):""}function s(t){return t.last_reading_at}function r(t){return t.kit?t.kit.name.match(/[0-9]+.?[0-9]*/)[0]:void 0}function l(e){return{id:e.owner.id,username:e.owner.username,kits:e.owner.device_ids,city:e.owner.location.city,country:t[e.owner.location.country_code],url:e.owner.url,avatar:e.owner.avatar}}function c(t){var e=u(t),n=i(e);return{name:e,className:n}}function u(t){return t.state.replace("_"," ")}function d(){return"./assets/images/sckit_avatar.jpg"}function m(t){return moment(t.recorded_at).format("")}function p(t,e){return _.some(t,function(t){return t.id===e})}var v={parseLocation:e,parseLabels:n,parseUserTags:a,parseType:o,classify:i,parseTime:s,parseVersion:r,parseOwner:l,parseState:c,parseAvatar:d,belongsToUser:p,parseSensorTime:m};return v}angular.module("app.components").factory("kitUtils",t),t.$inject=["COUNTRY_CODES","device"]}(),function(){"use strict";function t(){return function(t,e){return void 0===e?t:t?_.filter(t,function(t){var n=-1!==t.labels.indexOf(e);if(n)return n;var a="online"===e&&_.some(t.labels,function(t){return-1!==t.indexOf("new")});return a}):void 0}}angular.module("app.components").filter("filterLabel",t)}(),function(){"use strict";angular.module("app.components").constant("PROFILE_TOOLS",[{type:"documentation",title:"How to connect your Smart Citizen Kit tutorial",description:"Adding a Smart Citizen Kit",avatar:"",href:"http://www.google.com"},{type:"documentation",title:"Download the latest SCK Firmware",description:"Github version of the firmware",avatar:""},{type:"documentation",title:"RESTful API Documentation",description:"API Docs",avatar:""},{type:"community",title:"Smart Citizen Forum",description:"Your feedback is important for us",avatar:""},{type:"documentation",title:"SCK Repository Documentation",description:"Fork the project",avatar:""},{type:"social",title:"Like us on Facebook",description:"Follow our news on Facebook",avatar:""},{type:"social",title:"Follow us on Twitter",description:"Discover the weather and your smart connections on Twitter",avatar:""},{type:"social",title:"Be our friend on Google+",description:"Get informed about latest news of Smart Citizen",avatar:""}])}(),function(){"use strict";angular.module("app.components").constant("MARKER_ICONS",{defaultIcon:{},markerSmartCitizenNormal:{type:"div",className:"markerSmartCitizenNormal",iconSize:[24,24]},markerSmartCitizenOnline:{type:"div",className:"markerSmartCitizenOnline",iconSize:[24,24]},markerSmartCitizenOnlineActive:{type:"div",className:"markerSmartCitizenOnline marker_blink",iconSize:[24,24]},markerSmartCitizenOffline:{type:"div",className:"markerSmartCitizenOffline",iconSize:[24,24]},markerSmartCitizenOfflineActive:{type:"div",className:"markerSmartCitizenOffline marker_blink",iconSize:[24,24]}})}(),function(){"use strict";angular.module("app.components").constant("DROPDOWN_OPTIONS_USER",[{divider:!0,text:"Hello,"},{text:"PROFILE",href:"./profile"},{text:"LOGOUT",href:"./logout"}])}(),function(){"use strict";angular.module("app.components").constant("DROPDOWN_OPTIONS_KIT",[{text:"SET UP",value:"1",href:"/kits/new"},{text:"EDIT",value:"2",href:"/kits/edit/"}])}(),function(){"use strict";angular.module("app.components").constant("DROPDOWN_OPTIONS_COMMUNITY",[{text:"Forum",href:"https://forum.smartcitizen.me/"},{text:"Documentation",href:"http://docs.smartcitizen.me/#/"},{text:"API Reference",href:"http://api.smartcitizen.me/"},{text:"Github",href:"https://github.com/fablabbcn/Smart-Citizen-Kit"}])}(),function(){"use strict";angular.module("app.components").constant("COUNTRY_CODES",{AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"})}(),function(){"use strict";function t(t){function e(e){return t.all("users").post(e)}function n(e){return t.one("users",e).get()}function a(e){return t.all("me").customPUT(e)}var o={createUser:e,getUser:n,updateUser:a};return o}angular.module("app.components").factory("user",t),t.$inject=["Restangular"]}(),function(){"use strict";function t(t){function e(){return t.all("tags").getList()}var n={getTags:e};return n}angular.module("app.components").factory("tag",t),t.$inject=["Restangular"]}(),function(){"use strict";function t(t,e,n){function a(){return t.all("sensors").getList()}function o(t){t=t}function i(){return l}function s(a,o,i){var s=n.getRollup(o,i);return o=e.convertTime(o),i=e.convertTime(i),o&&i?t.one("devices",a).customGET("pg_readings",{from:o,to:i,all_intervals:!0,rollup:s}):t.one("devices",a).customGET("pg_readings")}function r(a,o,i,s){var r=n.getRollup(i,s);return i=e.convertTime(i),s=e.convertTime(s),t.one("devices",a).customGET("readings",{from:i,to:s,rollup:r,sensor_id:o,all_intervals:!0})}var l;a().then(function(t){o(t)});var c={callAPI:a,setTypes:o,getTypes:i,getSensorsData:s,getSensorsDataNew:r};return c}angular.module("app.components").factory("sensor",t),t.$inject=["Restangular","utils","sensorUtils"]}(),function(){"use strict";function t(t,e){function n(t){return e.all("search").getList({q:t})}var a={globalSearch:n};return a}angular.module("app.components").factory("search",t),t.$inject=["$http","Restangular"]}(),function(){"use strict";function t(t){function e(){n()}function n(){return o().success(function(t){var e=t.loc.split(",");return i={lat:parseFloat(e[0]),lng:parseFloat(e[1])}})}function a(){return i}function o(){return t.jsonp("http://ipinfo.io/?callback=JSON_CALLBACK")}var i;e();var s={getPosition:n,callAPI:o,getPositionObj:a};return s}angular.module("app.components").factory("geolocation",t),t.$inject=["$http"]}(),function(){"use strict";function t(t,e){function n(e){var n={filename:e};return t.all("me/avatar").post(n)}function a(t,n,a,o){return e.upload({url:"https://smartcitizen.s3-eu-west-1.amazonaws.com",method:"POST",fields:{key:n,policy:a,signature:o,AWSAccessKeyId:"AKIAJ753OQI6JPSDCPHA",acl:"public-read",success_action_status:200},file:t})}function o(t,e){return e=void 0===e?"s101":e,"https://images.smartcitizen.me/"+e+"/"+t}var i={getCredentials:n,uploadFile:a,getImageURL:o};return i}angular.module("app.components").factory("file",t),t.$inject=["Restangular","Upload"]}(),function(){"use strict";function t(t,e,n){function a(){v()&&g()}function o(e){var n="";return n+=e.lat+","+e.lng,t.all("devices").getList({near:n,per_page:"100"})}function i(){return t.all("devices/world_map").getList()}function s(e){return t.one("devices",e).get()}function r(e){return t.all("devices").post(e)}function l(e,n){return t.one("devices",e).patch(n)}function c(){return t.all("kits").getList()}function u(){return f}function d(){return h||e.localStorage.getItem("smartcitizen.markers")&&JSON.parse(e.localStorage.getItem("smartcitizen.markers")).data}function m(t){var n={timestamp:new Date,data:t};e.localStorage.setItem("smartcitizen.markers",JSON.stringify(n)),h=n.data}function p(){return e.localStorage.getItem("smartcitizen.markers")&&JSON.parse(e.localStorage.getItem("smartcitizen.markers")).timestamp}function v(){var t=p();return!n.isWithin15min(t)}function g(){e.localStorage.removeItem("smartcitizen.markers")}var f,h;a(),c().then(function(t){f=_.indexBy(t,"id")});var k={getDevices:o,getAllDevices:i,getDevice:s,createDevice:r,updateDevice:l,getGenericKitData:u,getWorldMarkers:d,setWorldMarkers:m};return k}angular.module("app.components").factory("device",t),t.$inject=["Restangular","$window","timeUtils"]}(),function(){"use strict";function t(t,e,n,a,o,i,s,r){function l(){c("appLoad")}function c(a){b.token=e.localStorage.getItem("smartcitizen.token")&&JSON.parse(e.localStorage.getItem("smartcitizen.token")),b.data=e.localStorage.getItem("smartcitizen.data")&&new i(JSON.parse(e.localStorage.getItem("smartcitizen.data"))),b.token&&f().then(function(l){e.localStorage.setItem("smartcitizen.data",JSON.stringify(l.plain()));var c=new i(l);b.data&&b.data.role!==c.role&&(b.data=c,t.path("/")),b.data=c,a&&"appLoad"===a?s(function(){o.$broadcast("loggedIn",{time:"appLoad"})},3e3):(n.reload(),s(function(){r.success("Login was successful"),o.$broadcast("loggedIn",{})},2e3))})}function u(){f().then(function(t){e.localStorage.setItem("smartcitizen.data",JSON.stringify(t.plain()))})}function d(){return b}function m(){return!!e.localStorage.getItem("smartcitizen.token")}function p(t){e.localStorage.setItem("smartcitizen.token",JSON.stringify(t)),c()}function v(t){return a.all("sessions").post(t)}function g(){e.localStorage.removeItem("smartcitizen.token"),e.localStorage.removeItem("smartcitizen.data")}function f(){return a.all("").customGET("me")}function h(t){return a.all("password_resets").post(t)}function _(t){return a.one("password_resets",t).get()}function k(t,e){return a.one("password_resets",t).patch(e)}function y(t){return"admin"===t.role}var b={token:null,data:null};s(function(){l()},100);var w={isAuth:m,setCurrentUser:c,getCurrentUser:d,updateUser:u,saveData:p,login:v,logout:g,recoverPassword:h,getResetPassword:_,patchResetPassword:k,isAdmin:y};return w}angular.module("app.components").factory("auth",t),t.$inject=["$location","$window","$state","Restangular","$rootScope","AuthUser","$timeout","alert"]}(),function(){"use strict";function t(){function t(t,e){t.element=e
}function e(t){t.slidePosition=0,t.slideSize=20,this.getTimesSlided=function(){return t.slideSize},this.getPosition=function(){return t.slidePosition*t.slideSize},this.decrementPosition=function(){t.slidePosition-=1},this.incrementPosition=function(){t.slidePosition+=1},this.scrollIsValid=function(e){var n=t.element.scrollLeft();return console.log("scrollpos",n),"left"===e?n>0&&t.slidePosition>=0:"right"===e?300>n:void 0}}return e.$inject=["$scope"],{controller:e,link:t}}function e(){function t(t,e,n,a){var o=angular.element(".sensors_container");e.on("click",function(){a.scrollIsValid("left")&&"left"===n.direction?(a.decrementPosition(),o.scrollLeft(a.getPosition()),console.log(a.getPosition())):a.scrollIsValid("right")&&"right"===n.direction&&(a.incrementPosition(),o.scrollLeft(a.getPosition()),console.log(a.getPosition()))})}return{link:t,require:"^slide-menu",restrict:"A",scope:{direction:"@"}}}angular.module("app.components").directive("slide",e).directive("slideMenu",t),e.$inject=[]}(),function(){"use strict";function t(){function t(t,e){e.on("mouseenter",function(){angular.element(".sensor_data_description").css("display","inline-block")}),e.on("mouseleave",function(){angular.element(".sensor_data_description").css("display","none")})}return{link:t}}angular.module("app.components").directive("showPopupInfo",t),t.$inject=[]}(),function(){"use strict";function t(){function t(t,e){e.on("click",function(){var t=angular.element(".sensor_description_preview").text();t.length<140||(angular.element(".sensor_description_preview").hide(),angular.element(".sensor_description_full").show())})}return{link:t}}angular.module("app.components").directive("showPopup",t),t.$inject=[]}(),function(){"use strict";function t(t,e){function n(n,a){var o;e(function(){o=angular.element(".kit_chart").height()},1e3),angular.element(t).on("scroll",function(){var t=document.body.scrollTop;o>t&&a.css("bottom",12+t+"px")})}return{link:n}}angular.module("app.components").directive("moveFilters",t),t.$inject=["$window","$timeout"]}(),function(){"use strict";function t(){function t(t){n=t}function e(){return n}var n,a={setKit:t,getKit:e};return a}angular.module("app.components").factory("layout",t)}(),function(){"use strict";function t(t,e){function n(n,a){a.on("scroll",function(){var t=angular.element(this).scrollLeft(),e=this.scrollWidth,n=angular.element(this).width();return e===n&&(angular.element(".button_scroll_left").css("opacity","0.5"),angular.element(".button_scroll_right").css("opacity","0.5")),e-n>2&&(angular.element(".button_scroll_left").css("opacity","1"),angular.element(".button_scroll_right").css("opacity","1")),2>=e-n-t?void angular.element(".button_scroll_right").css("opacity","0.5"):0===t?void angular.element(".button_scroll_left").css("opacity","0.5"):(angular.element(".button_scroll_left").css("opacity","1"),void angular.element(".button_scroll_right").css("opacity","1"))}),e(function(){a.trigger("scroll")}),angular.element(t).on("resize",function(){e(function(){a.trigger("scroll")},1e3)})}return{link:n,restrict:"A"}}angular.module("app.components").directive("horizontalScroll",t),t.$inject=["$window","$timeout"]}(),function(){"use strict";function t(){function t(t,e){e.on("mouseleave",function(){angular.element(".sensor_description_preview").show(),angular.element(".sensor_description_full").hide()})}return{link:t}}angular.module("app.components").directive("hidePopup",t),t.$inject=[]}(),function(){"use strict";function t(t){function e(e){console.log("i",e),e.on("click",function(){console.log("e"),angular.element(document.body).css("overflow","hidden"),t(function(){angular.element(document.body).css("overflow","initial")})})}return{compile:e,restrict:"A",priority:1e5}}angular.module("app.components").directive("disableScroll",t),t.$inject=["$timeout"]}(),function(){"use strict";function t(t){function e(){t.$broadcast("blur")}function n(){t.$broadcast("unblur")}function a(){t.$broadcast("removeNav")}function o(){t.$broadcast("addNav")}function i(){t.$broadcast("showChartSpinner")}function s(){t.$broadcast("hideChartSpinner")}function r(e){t.$broadcast("kitLoaded",e)}function l(){t.$broadcast("showPasswordRecovery")}function c(){t.$broadcast("showLogin")}function u(){t.$broadcast("showSignup")}function d(){t.$broadcast("showPasswordReset")}function m(){t.$broadcast("hideAlert")}function p(){t.$broadcast("viewLoading")}function v(){t.$broadcast("viewLoaded")}function g(e){t.$broadcast("kitWithoutData",e)}function f(e){t.$broadcast("goToLocation",e)}function h(){t.$broadcast("mapStateLoading")}function _(){t.$broadcast("mapStateLoaded")}var k={blur:e,unblur:n,removeNav:a,addNav:o,showChartSpinner:i,hideChartSpinner:s,kitLoaded:r,showPasswordRecovery:l,showLogin:c,showSignup:u,showPasswordReset:d,hideAlert:m,viewLoading:p,viewLoaded:v,kitWithoutData:g,goToLocation:f,mapStateLoading:h,mapStateLoaded:_};return k}angular.module("app.components").factory("animation",t),t.$inject=["$rootScope"]}(),function(){"use strict";function t(){function t(t,e){t.$watch("moveDown",function(t){t?e.addClass("move_down"):e.removeClass("move_down")})}return{link:t,scope:!1,restrict:"A"}}function e(t,e){function n(n,a){var o=a[0].offsetTop,i=angular.element(".stickNav").height();e(function(){o=a[0].offsetTop,i=angular.element(".stickNav").height()},1e3),angular.element(t).on("scroll",function(){var t=document.body.scrollTop;t+i>=o?(a.addClass("stickMenu"),n.$apply(function(){n.moveDown=!0})):(a.removeClass("stickMenu"),n.$apply(function(){n.moveDown=!1}))})}return{link:n,scope:!1,restrict:"A"}}function n(){function t(t,e){t.$on("blur",function(){e.addClass("blur")}),t.$on("unblur",function(){e.removeClass("blur")})}return{link:t,scope:!1,restrict:"A"}}function a(t){function e(e,n){n.on("focusin",function(){t.removeNav()}),n.on("focusout",function(){t.addNav()});var a=n.find("input");a.on("blur",function(){angular.element(document.body).css("overflow","auto")}),a.on("focus",function(){angular.element(document.body).css("overflow","hidden")})}return{link:e}}function o(t,e,n){function a(e,a){var o=t[0].body.clientHeight,i=angular.element(".stickNav").height();n(function(){var t=angular.element(".kit_overview").height(),e=angular.element(".kit_menu").height(),n=(angular.element(".kit_chart").height(),o-i-e-t);a.css("height",n+"px")})}return{link:a,scope:!0,restrict:"A"}}function i(t,e,n){function a(t,e){var a=n[0].body.clientHeight,o=angular.element(".kit_overview").height(),i=angular.element(".kit_menu").height(),s=(angular.element(".kit_chart").height(),a-i-o);e.css("margin-top",s+"px")}return{link:a}}function s(t){function e(e,n){t(function(){n.focus()})}return{link:e}}angular.module("app.components").directive("moveDown",t).directive("stick",e).directive("blur",n).directive("focus",a).directive("changeMapHeight",o).directive("changeContentMargin",i).directive("focusInput",s),t.$inject=[],e.$inject=["$window","$timeout"],a.$inject=["animation"],o.$inject=["$document","layout","$timeout"],i.$inject=["layout","$timeout","$document"],s.$inject=["$timeout"]}(),function(){"use strict";function t(t,e){function n(n,a){function o(t){l&&angular.element(e).scrollTop(t-l.navbar.height-l.kitMenu.height)}function i(t){return c[t]}function s(){var t=angular.element(".md-button.button_active");if(t.length){t.removeClass("button_active");var e=t.find(".stroke_container");e.css("stroke","none"),e.css("stroke-width","1");var n=e.find(".fill_container");n.css("fill","#82A7B0")}}function r(t){var e=angular.element(t);e.addClass("button_active");var n=e.find(".stroke_container");n.css("stroke","white"),n.css("stroke-width","0.01px");var a=n.find(".fill_container");a.css("fill","white")}var l,c=a.children();t(function(){var t=angular.element(".stickNav"),e=angular.element(".kit_menu"),n=angular.element(".kit_overview"),a=angular.element(".kit_chart"),o=angular.element(".kit_details"),i=angular.element(".kit_owner"),s=angular.element(".kit_comments");l={navbar:{height:t.height()},kitMenu:{height:e.height()},kitOverview:{height:n.height(),offset:n.offset().top,buttonOrder:0},kitDashboard:{height:a.height(),offset:a.offset().top,buttonOrder:40},kitDetails:{height:o.height(),offset:o.offset().top,buttonOrder:1},kitOwner:{height:i.height(),offset:i.offset().top,buttonOrder:2},kitComments:{height:s.height(),offset:s.offset().top,buttonOrder:3}}},1e3),_.each(c,function(t){angular.element(t).on("click",function(){var t=angular.element(this).index();for(var n in l)if(l[n].buttonOrder===t){var a=l[n].offset;o(a),angular.element(e).trigger("scroll")}})});var u;angular.element(e).on("scroll",function(){if(l){var t,e=document.body.scrollTop,n=e+l.navbar.height+l.kitMenu.height;"none"!==u&&n<=l.kitOverview.offset?(t=i(l.kitOverview.buttonOrder),s(),u="none"):"overview"!==u&&n>=l.kitOverview.offset&&n<=l.kitOverview.offset+l.kitOverview.height?(t=i(l.kitOverview.buttonOrder),s(),r(t),u="overview"):"details"!==u&&n>=l.kitDetails.offset&&n<=l.kitDetails.offset+l.kitDetails.height?(t=i(l.kitDetails.buttonOrder),s(),r(t),u="details"):"owner"!==u&&n>=l.kitOwner.offset&&n<=l.kitOwner.offset+l.kitOwner.height?(t=i(l.kitOwner.buttonOrder),s(),r(t),u="owner"):"comments"!==u&&n>=l.kitComments.offset&&n<=l.kitComments.offset+l.kitOwner.height&&(t=i(l.kitComments.buttonOrder),s(),r(t),u="comments")}})}return{link:n,restrict:"A"}}angular.module("app.components").directive("activeButton",t),t.$inject=["$timeout","$window"]}(),angular.module("app",["ngFileUpload","ngMaterial","ui.router","restangular","angularSpinner","ngDropdowns","oauth","leaflet-directive","app.components"]),function(){"use strict";function t(t,e,n,a,o){t.state("landing",{url:"/",resolve:{location:["geolocation",function(t){var e=t.getPositionObj();return e?e:t.callAPI().then(function(t){var e=t.data.loc.split(","),n={lat:parseFloat(e[0]),lng:parseFloat(e[1])};return n})["catch"](function(t){throw new Error(t)})}],initialMarkers:["$state","device","location","HasSensorKit",function(t,e,n,a){return n&&n.lat&&n.lng||(n={lat:41.386,lng:2.1482}),e.getDevices(n).then(function(e){e=e.plain(),_(e).chain().map(function(t){return new a(t)}).filter(function(t){return!!t.longitude&&!!t.latitude}).find(function(t){return t.sensorsHasData()}).tap(function(n){n?t.go("layout.home.kit",{id:n.id}):t.go("layout.home.kit",{id:e[0].id})}).value()})}]}}).state("layout",{url:"","abstract":!0,templateUrl:"app/components/layout/layout.html",controller:"LayoutController",controllerAs:"vm"}).state("layout.kitEdit",{url:"/kits/edit/:id",templateUrl:"app/components/kit/editKit/editKit.html",controller:"EditKitController",controllerAs:"vm",resolve:{belongsToUser:["auth","$location","$stateParams","userUtils","kitUtils","$window","AuthUser",function(t,e,n,a,o,i,s){if(!t.isAuth())return void e.path("/");var r=parseInt(n.id),l=t.getCurrentUser().data||i.localStorage.getItem("smartcitizen.data")&&new s(JSON.parse(i.localStorage.getItem("smartcitizen.data"))),c=o.belongsToUser(l.kits,r),u=a.isAdmin(l);u||c||e.path("/")}],kitData:["$stateParams","device","FullKit",function(t,e,n){var a=t.id;return e.getDevice(a).then(function(t){return new n(t)})}]}}).state("layout.kitAdd",{url:"/kits/new",templateUrl:"app/components/kit/newKit/newKit.html",controller:"NewKitController",controllerAs:"vm"}).state("layout.home",{url:"/kits","abstract":!0,views:{"":{templateUrl:"app/components/home/template.html"},"map@layout.home":{templateUrl:"app/components/map/map.html",controller:"MapController",controllerAs:"vm"}},resolve:{location:["geolocation",function(t){return t.callAPI().then(function(t){var e=t.data.loc.split(","),n={lat:parseFloat(e[0]),lng:parseFloat(e[1])};return n})}],sensorTypes:["sensor",function(t){return t.callAPI().then(function(t){return t.plain()})}],markers:["$state","device","location","utils","Kit","Marker",function(t,e,n,a,o,i){var s=e.getWorldMarkers();return s&&s.length?s:e.getAllDevices().then(function(t){return _.chain(t).map(function(t){return new i(t)}).filter(function(t){return!!t.lng&&!!t.lat}).tap(function(t){e.setWorldMarkers(t)}).value()})}]}}).state("layout.home.kit",{url:"/:id",views:{"container@layout.home":{templateUrl:"app/components/kit/showKit/showKit.html",controller:"KitController",controllerAs:"vm"}},resolve:{kitData:["$stateParams","device","FullKit",function(t,e,n){var a=t.id;return e.getDevice(a).then(function(t){return new n(t)})}],mainSensors:["kitData","sensorTypes",function(t,e){return t.getSensors(e,{type:"main"})}],compareSensors:["kitData","sensorTypes",function(t,e){return t.getSensors(e,{type:"compare"})}],ownerKits:["kitData","PreviewKit","$q","device",function(t,e,n,a){var o=t.owner.kits;return n.all(o.map(function(t){return a.getDevice(t).then(function(t){return new e(t)})}))}],belongsToUser:["$window","$stateParams","auth","AuthUser","kitUtils","userUtils",function(t,e,n,a,o,i){if(!n.isAuth())return!1;var s=parseInt(e.id),r=n.getCurrentUser().data||t.localStorage.getItem("smartcitizen.data")&&new a(JSON.parse(t.localStorage.getItem("smartcitizen.data"))),l=o.belongsToUser(r.kits,s),c=i.isAdmin(r);return c||l}]}}).state("layout.userProfile",{url:"/users/:id",templateUrl:"app/components/userProfile/userProfile.html",controller:"UserProfileController",controllerAs:"vm",resolve:{isCurrentUser:["$stateParams","$location","auth",function(t,e,n){if(n.isAuth()){var a=parseInt(t.id),o=n.getCurrentUser().data&&n.getCurrentUser().data.id;a===o&&e.path("/profile")}}],userData:["$stateParams","$state","NonAuthUser","user",function(t,e,n,a){var o=t.id;return a.getUser(o).then(function(t){return new n(t)})}],kitsData:["$q","device","PreviewKit","userData",function(t,e,n,a){var o=_.pluck(a.kits,"id");return o.length?t.all(o.map(function(t){return e.getDevice(t).then(function(t){return new n(t)})})):[]}],isAdmin:["$window","$location","$stateParams","auth","AuthUser",function(t,e,n,a,o){var i=a.getCurrentUser().data&&a.getCurrentUser().data.role||t.localStorage.getItem("smartcitizen.data")&&new o(JSON.parse(t.localStorage.getItem("smartcitizen.data"))).role;if("admin"!==i)return!1;var s=n.id;e.path("/profile/"+s)}]}}).state("layout.myProfile",{url:"/profile",authenticate:!0,templateUrl:"app/components/myProfile/myProfile.html",controller:"MyProfileController",controllerAs:"vm",resolve:{userData:["$location","$window","user","auth","AuthUser",function(t,e,n,a,o){var i=a.getCurrentUser().data||e.localStorage.getItem("smartcitizen.data")&&new o(JSON.parse(e.localStorage.getItem("smartcitizen.data")));if(i)return i}],kitsData:["$q","device","PreviewKit","userData",function(t,e,n,a){var o=_.pluck(a.kits,"id");return o.length?t.all(o.map(function(t){return e.getDevice(t).then(function(t){return new n(t)})})):[]}]}}).state("layout.myProfileAdmin",{url:"/profile/:id",authenticate:!0,templateUrl:"app/components/myProfile/myProfile.html",controller:"MyProfileController",controllerAs:"vm",resolve:{isAdmin:["$window","auth","$location","AuthUser",function(t,e,n,a){var o=e.getCurrentUser().data&&e.getCurrentUser().data.role||t.localStorage.getItem("smartcitizen.data")&&new a(JSON.parse(t.localStorage.getItem("smartcitizen.data"))).role;return"admin"===o?!0:void n.path("/")}],userData:["$stateParams","user","auth","AuthUser",function(t,e,n,a){var o=t.id;return e.getUser(o).then(function(t){return new a(t)})}],kitsData:["$q","device","PreviewKit","userData",function(t,e,n,a){var o=_.pluck(a.kits,"id");return o.length?t.all(o.map(function(t){return e.getDevice(t).then(function(t){return new n(t)})})):[]}]}}).state("layout.login",{url:"/login",authenticate:!1,resolve:{buttonToClick:["$location","auth",function(t,e){return e.isAuth()?t.path("/"):(t.path("/kits/667"),void t.search("login","true"))}]}}).state("layout.signup",{url:"/signup",authenticate:!1,resolve:{buttonToClick:["$location","auth",function(t,e){return e.isAuth()?t.path("/"):(t.path("/kits/667"),void t.search("signup","true"))}]}}).state("logout",{url:"/logout",authenticate:!0,resolve:{logout:["$location","$state","auth","$rootScope",function(t,e,n,a){n.logout(),t.path("/"),a.$broadcast("loggedOut")}]}}).state("passwordRecovery",{url:"/password_recovery",authenticate:!1,templateUrl:"app/components/passwordRecovery/passwordRecovery.html",controller:"PasswordRecoveryController",controllerAs:"vm"}).state("passwordReset",{url:"/password_reset/:code",authenticate:!1,templateUrl:"app/components/passwordReset/passwordReset.html",controller:"PasswordResetController",controllerAs:"vm"}),e.otherwise("/"),n.html5Mode({enabled:!0,requireBase:!1}).hashPrefix("!"),a.setBaseUrl("https://new-api.smartcitizen.me/v0"),o.debugEnabled(!1)}angular.module("app").config(t),t.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","RestangularProvider","$logProvider"]}(),function(){"use strict";function t(t,e,n,a,o,i,s){t.$on("$stateChangeStart",function(t,n,o,r){return"layout.home.kit"===n.name,"layout.home.kit"===n.name&&"layout.home.kit"!==r.name&&s.mapStateLoading(),n.authenticate===!1&&a.isAuth()?(t.preventDefault(),void e.go("landing")):(n.authenticate&&(a.isAuth()||(t.preventDefault(),e.go("landing"))),s.hideAlert(),void i.scrollTo(0,0))}),n.addFullRequestInterceptor(function(t,e,n,o,i,s,r){if(a.isAuth()){var l=a.getCurrentUser().token;i.Authorization="Bearer "+l}return{element:t,headers:i,params:s,httpConfig:r}})}angular.module("app").run(t),t.$inject=["$rootScope","$state","Restangular","auth","$templateCache","$window","animation"]}(),angular.module("app").run(["$templateCache",function(t){t.put("app/components/alert/alerterror.html",'<md-toast class="red"><md-icon md-svg-src="./assets/images/alert_icon.svg" alt="Insert Drive Icon" class="alert_typeIcon"></md-icon><span flex="">{{ vm.message }}</span><md-button ng-click="vm.close()" aria-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg" alt="Insert Drive Icon" class="alert_closeIcon"></md-icon></md-button></md-toast>'),t.put("app/components/alert/alertinfo.html",'<md-toast class="yellow"><md-icon md-svg-src="./assets/images/alert_icon.svg" alt="Alert icon" class="alert_typeIcon"></md-icon><span flex="">{{ vm.message }}</span><md-button ng-click="vm.close()" aria-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg" alt="Insert Drive Icon" class="alert_closeIcon"></md-icon></md-button></md-toast>'),t.put("app/components/alert/alertinfoButton.html",'<md-toast class="yellow" layout="row" layout-align="space-between center"><div><md-icon md-svg-src="./assets/images/alert_icon.svg" alt="Alert icon" class="alert_typeIcon"></md-icon><span flex="">{{ vm.message }}</span><md-button ng-href="{{ vm.href}}" class="alert_button" ng-click="vm.goToComment()">{{ vm.button }}</md-button></div><md-button ng-click="vm.close()" aria-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg" alt="Insert Drive Icon" class="alert_closeIcon"></md-icon></md-button></md-toast>'),t.put("app/components/alert/alertsuccess.html",'<md-toast class="green"><md-icon md-svg-src="./assets/images/alert_icon.svg" alt="Insert Drive Icon" class="alert_typeIcon"></md-icon><span flex="">{{ vm.message }}</span><md-button ng-click="vm.close()" aria-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg" alt="Insert Drive Icon" class="alert_closeIcon"></md-icon></md-button></md-toast>'),t.put("app/components/disqus/disqus.html","<div id=\"disqus_thread\"></div><script type=\"text/javascript\">\n   /* * * CONFIGURATION VARIABLES * * */\n   var disqus_shortname = 'smartcitizen';\n   // var disqus_identifier = 'newid1';\n   // var disqus_url = 'http://example.com/unique-path-to-article-1/';\n   // var disqus_config = function () { \n   //   this.language = \"en\";\n   // };\n\n   \n   /* * * DON'T EDIT BELOW THIS LINE * * */\n   (function() {\n       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;\n       dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';\n       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);\n   })();\n</script><noscript>Please enable JavaScript to view the <a href=\"https://disqus.com/?ref_noscript\" rel=\"nofollow\">comments powered by Disqus.</a></noscript>"),t.put("app/components/footer/footer.html",'<md-icon md-svg-src="./assets/images/LogotipoSmartCitizen.svg" class="footer_icon"></md-icon>'),t.put("app/components/home/template.html",'<div layout="vertical" layout-fill=""><md-content><section class="content"><div ui-view="map" class="map_state"></div><div ui-view="container" class="kit"></div></section></md-content></div>'),t.put("app/components/layout/layout.html",'<div class="navbar_container"><md-toolbar layout="row" layout-align="end center" class="stickNav"><a href="/" class="logo_link"><md-icon md-svg-src="./assets/images/LogotipoSmartCitizen.svg" alt="Insert Drive Icon" class="logo_icon"></md-icon></a><section layout="row" class="nav_left" layout-align="space-around center"><md-button ng-show="vm.isShown" href="/" class="md-flat full_height map"><md-icon md-svg-src="./assets/images/map_icon.svg" class="nav_icon"></md-icon><span>Map</span></md-button><md-button ng-show="vm.isShown" href="" class="md-flat full_height community" aria-label="" dropdown-menu="vm.dropdownOptionsCommunity" dropdown-model="vm.dropdownSelectedCommunity" dropdown-item-label="text" layout="row" layout-align="center center"><md-icon md-svg-src="./assets/images/community_icon.svg" class="nav_icon"></md-icon><span>Community</span></md-button></section><search flex=""></search><section layout="row" class="nav_right" layout-align="{{vm.navRightLayout}}"><div ng-show="vm.isShown" store="" logged="vm.isLoggedin" class="md-flat full_height get"></div><div ng-show="vm.isShown && !vm.isLoggedin" login="" class="navbar_login_button md-display-1"></div><div ng-show="vm.isShown && !vm.isLoggedin" signup="" class="navbar_signup_button md-display-1"></div><md-button ng-show="vm.isShown && vm.isLoggedin" class="md-flat navbar_avatar_button" aria-label="" dropdown-menu="vm.dropdownOptions" dropdown-model="vm.dropdownSelected" dropdown-item-label="text"><img class="navbar_avatar_icon" ng-src="{{ vm.currentUser.avatar || \'./assets/images/avatar.svg\' }}"></md-button></section></md-toolbar></div><div ui-view=""></div><footer class="footer" ng-include="\'app/components/footer/footer.html\'" layout="row" layout-align="center center"></footer>'),t.put("app/components/login/login.html",'<md-button class="md-flat full_height" ng-click="showLogin($event)">Log In</md-button>'),t.put("app/components/login/loginModal.html",'<md-dialog><md-dialog-content class="modal modal_login"><md-progress-circular ng-show="waitingFromServer" class="md-hue-3 login_spinner" md-mode="indeterminate"></md-progress-circular><md-button class="close_icon" aria-label=""><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="hide()" class=""></md-icon></md-button><form name="login_form" novalidate="" ng-submit="answer(vm.user)"><div class="modal_content_container"><h2>LOG IN</h2><div class="modal_message"><p class="header">People looking for a better city</p><p class="subheader">You\'re part of them? Feel free to join us!</p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Username</label> <input id="autofocus" type="text" name="username" ng-model="vm.user.username" focus-input="" ng-required="login_form.$submitted"></md-input-container><p class="errors" ng-show="login_form.$submitted || login_form.username.$touched"><span ng-show="login_form.username.$error.required">Username is required</span></p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Password</label> <input type="password" name="password" ng-model="vm.user.password" ng-required="login_form.$submitted"></md-input-container><p class="errors" ng-show="login_form.$submitted || login_form.password.$touched"><span ng-show="login_form.password.$error.required">Password is required</span></p></div></div><md-button class="md-flat md-primary main" type="submit">LOG IN</md-button></form></md-dialog-content><p class="message_below"><span><span class="message_below_question">New here?</span><md-button class="message_below_link" ng-click="openSignup()">SIGN UP</md-button></span> <span><span class="message_below_question">Forgot your password?</span><md-button class="message_below_link" ng-click="openPasswordRecovery()">REQUEST</md-button></span></p></md-dialog>'),t.put("app/components/map/map.html",'<section class="map" change-map-height=""><leaflet center="vm.center" layers="vm.layers" markers="vm.markers" defaults="vm.defaults" event-broadcast="vm.events" width="100%" height="100%"></leaflet><div class="map_legend" layout="row" layout-align="start center" move-filters=""><md-button ng-click="vm.openFilterPopup()" class="map_filter_button" layout="row" layout-align="center center" aria-label=""><md-icon md-svg-src="./assets/images/filter_icon.svg"></md-icon></md-button><div class="chips"><div ng-repeat="(filterName, isFilterSelected) in vm.filterData" class="chip map_filter" ng-if="isFilterSelected && !vm.allFiltersSelected" layout="row" layout-align="center center"><span class="chip_name">{{ filterName }}</span> <button ng-click="vm.removeFilter(filterName)" class="chip_icon" arial-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg"></md-icon></button></div><div ng-if="vm.allFiltersSelected" class="map_filter" layout="row" layout-align="center center"><div class="chip map_filter"><span class="chip_name">ALL FILTERS</span></div></div></div></div><md-progress-linear ng-show="vm.kitLoading" class="md-hue-3 kit_spinner" md-mode="indeterminate"></md-progress-linear></section>'),t.put("app/components/map/mapFilterPopup.html",'<md-dialog><md-dialog-content class="modal modal_mapFilter"><md-button class="close_icon"><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="cancel()" class=""></md-icon></md-button><div class="modal_content_container_filter"><h2>FILTERS</h2><div class="modal_message"><p class="message">You can apply some filters to get more accurate results on the map.</p></div><div class="input_filter"><h3>Location filter</h3><small>now showing <span ng-show="form.indoor">Indoor</span><span ng-show="form.indoor && form.outdoor">,</span><span ng-show="form.outdoor">Outdoor</span></small><div class="modal_mapFilter_input"><md-checkbox ng-change="applyFilterRules()" ng-model="form.indoor" aria-label=""></md-checkbox><span>Indoor</span></div><div class="modal_mapFilter_input"><md-checkbox ng-change="applyFilterRules()" ng-model="form.outdoor" aria-label=""></md-checkbox><span>Outdoor</span></div></div><md-divider></md-divider><div class="input_filter"><h3>Status filter</h3><small>now showing <span ng-show="form.online">Online</span><span ng-show="form.online && form.offline">,</span><span ng-show="form.offline">Offline</span></small><div class="modal_mapFilter_input"><md-checkbox ng-change="applyFilterRules()" ng-model="form.online" aria-label=""></md-checkbox><span>Online</span></div><div class="modal_mapFilter_input"><md-checkbox ng-change="applyFilterRules()" ng-model="form.offline" aria-label=""></md-checkbox><span>Offline</span></div></div><md-divider></md-divider></div><md-button class="md-flat button_clear" ng-click="answer()">CLEAR FILTERS</md-button><md-button class="md-flat md-primary main" ng-click="answer(form)">APPLY</md-button></md-dialog-content></md-dialog>'),t.put("app/components/myProfile/myProfile.html",'<section class="myProfile_state"><div class="profile_header myProfile_header"><div class="myProfile_header_container" layout="row"><img ng-src="{{ vm.user.avatar || \'./assets/images/avatar.svg\' }}" class="profile_header_avatar myProfile_header_avatar"><div class="profile_header_content"><div class="profile_header_name">{{ vm.user.username || \'No data\' }}</div><div class="profile_header_location"><md-icon md-svg-src="./assets/images/location_icon_light.svg" class="profile_header_content_avatar"></md-icon><span><span ng-if="vm.user.city">{{ vm.user.city }}</span> <span ng-if="vm.user.city && vm.user.country">,</span> <span ng-if="vm.user.country">{{ vm.user.country }}</span> <span ng-if="!vm.user.city && !vm.user.country">No data</span></span></div><div class="profile_header_url"><md-icon md-svg-src="./assets/images/url_icon_light.svg" class="profile_header_content_avatar"></md-icon><a ng-href="{{ vm.user.url || \'http://example.com\' }}">{{ vm.user.url || \'No data\' }}</a></div></div></div></div><div class="myProfile_tabs_parent"><md-tabs class="myProfile_tabs" md-center-tabs="true" md-selected="vm.selectedTab"><md-tab label="" md-on-select="vm.highlightIcon(0)"><md-tab-label><md-icon md-svg-src="./assets/images/user_details_icon.svg" class="myProfile_tab_icon"></md-icon><span>PROFILE</span></md-tab-label><md-tab-body><div class="profile_content" layout="row"><div class="profile_sidebar"><p class="profile_sidebar_title">EDIT YOUR PROFILE</p><p class="profile_sidebar_description">A complete profile helps us to bring to you a better experience. Please, take your time completing all fields.</p><md-button ng-click="" class="profile_sidebar_button myProfile_sidebar_button"><md-icon md-svg-src="./assets/images/support_icon_blue.svg" class="profile_sidebar_avatar"></md-icon><span>Support</span></md-button><md-button ng-click="" class="profile_sidebar_button myProfile_sidebar_button"><md-icon md-svg-src="./assets/images/community_icon_blue.svg" class="profile_sidebar_avatar"></md-icon><span>Community</span></md-button></div><div class="profile_content_main" flex=""><div class="myProfile_content_form"><div class="myProfile_form_avatar" layout="row" layout-align="start center"><img ng-src="{{ vm.user.avatar || \'./assets/images/avatar.svg\' }}" class="myProfile_form_avatarImage"><md-button class="myProfile_form_avatarButton" ngf-select="" ngf-change="vm.uploadAvatar($files)">CHANGE AVATAR</md-button></div><form ng-submit="vm.updateUser(vm.formUser)"><div layout="" layout-sm="column" class="field myProfile_content_form_input"><md-input-container flex=""><label>Username</label> <input type="text" ng-model="vm.formUser.username"></md-input-container><p class="myProfile_updateForm_error" ng-show="!!vm.errors.username.length"><span ng-repeat="error in vm.errors.username">Username {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field myProfile_content_form_input"><md-input-container flex=""><label>Password</label> <input type="password" ng-model="vm.formUser.password"></md-input-container><p class="myProfile_updateForm_error" ng-show="!!vm.errors.password.length"><span ng-repeat="error in vm.errors.password">Password {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field myProfile_content_form_input"><md-input-container flex=""><label>Email</label> <input type="email" ng-model="vm.formUser.email"></md-input-container><p class="myProfile_updateForm_error" ng-show="!!vm.errors.email.length"><span ng-repeat="error in vm.errors.email">Email {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field myProfile_content_form_input"><md-input-container flex=""><label>City</label> <input type="text" ng-model="vm.formUser.city"></md-input-container><p class="myProfile_updateForm_error" ng-show="!!vm.errors.city.length"><span ng-repeat="error in vm.errors.city">City {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field myProfile_content_form_input"><md-input-container class="countryInput_container" flex=""><label>Country</label><md-autocomplete md-search-text="vm.searchText" md-items="item in vm.getCountries(vm.searchText)" md-item-text="item" md-selected-item="vm.formUser.country" md-floating-label="Favorite state">> <span>{{ item }}</span></md-autocomplete></md-input-container><p class="myProfile_updateForm_error" ng-show="!!vm.errors.country.length"><span ng-repeat="error in vm.errors.country">Country {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field myProfile_content_form_input"><md-input-container flex=""><label>Website</label> <input type="text" ng-model="vm.formUser.url"></md-input-container><p class="myProfile_updateForm_error" ng-show="!!vm.errors.url.length"><span ng-repeat="error in vm.errors.url">URL {{ error }}<span ng-if="!$last">,</span></span></p></div><md-button type="submit" class="myProfile_form_updateButton">UPDATE PROFILE</md-button></form><div class="clearfix"></div><div class="myProfile_apiKey" layout="row" layout-align="start center"><md-icon md-svg-src="./assets/images/key_icon.svg" class="myProfile_tab_icon"></md-icon><span class="myProfile_apiKey_text">API Key:</span><div class="myProfile_apiKey_number">{{ vm.user.key }}</div><md-button class="myProfile_apiKey_refreshButton md-flat" type="button" aria-label=""><md-icon md-svg-src="./assets/images/refresh_icon_white.svg" class="profile_sidebar_avatar"></md-icon></md-button></div><div class="clearfix"></div><md-button ng-click="vm.removeUser()" class="myProfile_form_removeButton" type="button">DELETE ACCOUNT</md-button><small>Delete your profile will erase all your data. Please consider think twice before click this button.</small></div></div></div></md-tab-body></md-tab><md-tab label="" md-on-select="vm.highlightIcon(1)"><md-tab-label><md-icon md-svg-src="./assets/images/kit_details_icon_light.svg" class="myProfile_tab_icon"></md-icon><span>KITS</span></md-tab-label><md-tab-body><div class="profile_content" layout="row"><div class="profile_sidebar"><p class="profile_sidebar_title">FILTER KITS BY</p><div class="profile_sidebar_options"><md-button ng-click="vm.filterKits(\'all\')" class="profile_sidebar_button">ALL</md-button><md-button ng-click="vm.filterKits(\'online\')" class="profile_sidebar_button">ONLINE</md-button><md-button ng-click="vm.filterKits(\'offline\')" class="profile_sidebar_button">OFFLINE</md-button></div></div><div class="profile_content_main" flex=""><div class="profile_content_main_top"><md-button class="myProfile_addKitButton" href="/kits/new">ADD A NEW KIT</md-button><span class="myProfile_content_main_title">{{ vm.filteredKits.length || 0 }} kits filtering by {{ vm.kitStatus.toUpperCase() || \'ALL\' }}</span></div><div class="kitList_parent" ng-repeat="kit in (vm.filteredKits = (vm.kits | filterLabel:vm.kitStatus ))" layout="row" layout-align="start center"><md-button ng-href="./kits/{{kit.id}}" class="kitList kitList_secondary" ng-class="{kitList_borderBottom: $last}" layout="row" layout-align="start center"><div class="kitList_container" layout="row" layout-align="start center"><div class=""><img class="kitList_avatar" ng-src="{{ kit.avatar || \'./assets/images/avatar.svg\' }}"></div><div class="kitList_content"><div class="kitList_name">{{ kit.name || \'No name\' }}</div><div class="kitList_data"><md-icon class="kitList_icon" md-svg-src="./assets/images/location_icon_light.svg"></md-icon><span>{{ kit.location || \'No location\' }}</span><md-icon class="kitList_icon" md-svg-src="./assets/images/sensor_icon.svg"></md-icon><span>{{ kit.type }}</span></div></div><div class="kitList_right" layout="row" layout-align="end center"><div class="chips" layout="row" layout-align="start center"><div class="chip kit_tag" ng-repeat="tag in kit.labels"><span class="chip_name">{{ tag }}</span></div><div class="chip kit_tag" ng-repeat="userTag in kit.userTags"><span class="chip_name">{{ userTag }}</span></div></div><div class="kitList_state kitList_state_{{ kit.state.className }}" ng-if="kit.state.name === \'never published\' || kit.state.name === \'not configured\'"><span>{{ kit.state.name }}</span></div></div></div></md-button><div class="kitList_config" layout="row"><md-button class="kitList_dropdownButton" aria-label="" dropdown-menu="kit.dropdownOptions" dropdown-model="vm.dropdownSelected" dropdown-item-label="text"><img src="./assets/images/config_icon.svg"></md-button></div></div><div class="kitList kitList_primary kitList_borderBottom" ng-show="!vm.kits.length"><div class="kitList_container"><div class="kitList_noKits"><span>There are not kits yet</span></div></div></div></div></div></md-tab-body></md-tab><md-tab label="" md-on-select="vm.highlightIcon(2)"><md-tab-label><md-icon md-svg-src="./assets/images/support_icon_white.svg" class="myProfile_tab_icon"></md-icon><span>TOOLS</span></md-tab-label><md-tab-body><div class="profile_content" layout="row"><div class="profile_sidebar"><p class="profile_sidebar_title">FILTER TOOLS BY</p><div class="profile_sidebar_options"><md-button ng-click="vm.filterTools(\'all\')" class="profile_sidebar_button">ALL</md-button><md-button ng-click="vm.filterTools(\'documentation\')" class="profile_sidebar_button">DOCUMENTATION</md-button><md-button ng-click="vm.filterTools(\'community\')" class="profile_sidebar_button">COMMUNITY</md-button><md-button ng-click="vm.filterTools(\'social\')" class="profile_sidebar_button">SOCIAL</md-button></div></div><div class="profile_content_main" flex=""><div class="profile_content_main_top"><span class="profile_content_main_title">{{ vm.filteredTools.length || 0 }} kits filtering by {{ vm.toolType.toUpperCase() || \'ALL\' }}</span></div><div class="profile_content_main_kits"><div ng-repeat="tool in (vm.filteredTools = (vm.tools | filter: { type: vm.toolType } ))" ng-class="{kitList_borderBottom: $last}"><md-button ng-href="{{tool.href}}" class="kitList kitList_primary" layout="row" layout-align="start center"><div class="kitList_container" layout="row" layout-align="start center"><div class=""><md-icon class="kitList_avatar" md-svg-src="{{ tool.avatar || \'./assets/images/user_details_icon.svg\'}}"></md-icon></div><div class="kitList_content"><div class="kitList_name">{{ tool.title }}</div><div class="kitList_data"><span>{{ tool.description }}</span></div></div></div></md-button></div></div></div></div></md-tab-body></md-tab></md-tabs></div></section>'),t.put("app/components/passwordRecovery/passwordRecovery.html",'<header class="footer" ng-include="\'app/components/footer/footer.html\'" layout="row" layout-align="center center"></header><form name="recovery_form" ng-submit="vm.recoverPassword()" novalidate="" class="form_container recovery_container"><div class="form_contentContainer"><h2 class="form_title">FORGOT YOUR PASSWORD?</h2><div class="form_messageContainer"><p class="form_messageHeader">People looking for a better city</p><p class="form_messageSubheader">You\'re part of them? Feel free to join us!</p><p class="form_messageDescription">Please insert your email address and you will receive an email in your inbox. If you do not receive an email from our team in 10 minutes approx., please check your spam folder.</p></div><div layout="" layout-sm="column" class="formRecovery_field"><md-input-container flex=""><label>Username</label> <input type="text" name="username" ng-model="vm.username" autofocus="" ng-required="recovery_form.$submitted"></md-input-container><p class="form_errors formRecovery_errors" ng-show="vm.errors"><span ng-show="recovery_form.username.$error.required">Valid Username or Email is required</span></p></div></div><md-progress-circular ng-show="vm.waitingFromServer" class="md-hue-3 login_spinner" md-mode="indeterminate"></md-progress-circular><md-button type="submit" class="md-flat md-primary form_button">REQUEST NEW PASSWORD</md-button></form>'),t.put("app/components/passwordRecovery/passwordRecoveryModal.html",'<md-dialog><md-dialog-content class="modal modal_recovery"><md-progress-circular ng-show="waitingFromServer" class="md-hue-3 login_spinner" md-mode="indeterminate"></md-progress-circular><md-button class="close_icon"><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="hide()" class=""></md-icon></md-button><form name="recovery_form" novalidate="" ng-submit="recoverPassword()"><div class="modal_content_container"><h2>FORGOT YOUR PASSWORD?</h2><div class="modal_message"><p class="header">People looking for a better city</p><p class="subheader">You\'re part of them? Feel free to join us!</p><p class="message">Please insert your email address and you will receive an email in your inbox. If you do not receive an email from our team in 10 minutes approx., please check your spam folder.</p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Username or Email</label> <input type="text" name="input" ng-model="input" focus-input="" ng-required="recovery_form.$submitted"></md-input-container><p class="errors" ng-show="errors"><span ng-show="recovery_form.input.$error.required">Valid Username or Email is required</span></p></div></div><md-button class="md-flat md-primary main" type="submit">REQUEST NEW PASSWORD</md-button></form></md-dialog-content><p class="message_below"><span><span class="message_below_question">New here?</span><md-button class="message_below_link" ng-click="openSignup()">SIGN UP</md-button></span></p></md-dialog>'),t.put("app/components/passwordReset/passwordReset.html",'<header class="footer" ng-include="\'app/components/footer/footer.html\'" layout="row" layout-align="center center"></header><form name="form" novalidate="" ng-submit="vm.answer(vm.form)" class="form_container recovery_container"><div class="form_contentContainer"><h2 class="form_title">ENTER YOUR NEW PASSWORD</h2><div class="form_messageContainer"><p class="form_messageHeader">People looking for a better city</p><p class="form_messageSubheader">You\'re part of them? Feel free to join us!</p></div><div layout="" layout-sm="column" class="formReset_field"><md-input-container flex=""><label>New Password</label> <input type="password" name="newPassword" ng-model="vm.form.newPassword" autofocus="" ng-required="form.$submitted"></md-input-container><p class="form_errors formReset_errors" ng-show="form.$submitted || form.newPassword.$touched"><span ng-show="form.newPassword.$error.required">Password is required</span></p></div><div layout="" layout-sm="column" class="formReset_field"><md-input-container flex=""><label>Confirm Password</label> <input type="password" name="password" ng-model="vm.form.confirmPassword" ng-required="form.$submitted"></md-input-container><p class="form_errors formReset_errors" ng-show="form.$submitted || form.password.$touched"><span ng-show="form.password.$error.required">Password is required</span> <span ng-show="vm.isDifferent && !form.password.$error.required && !vm.errors.password.length">It must be the same password</span> <span ng-show="!!vm.errors.password.length"><span ng-repeat="error in vm.errors.password">Password {{ error }}<span ng-if="!$last">,</span></span></span></p></div></div><md-button class="md-flat md-primary form_button" type="submit">RESET PASSWORD</md-button></form>'),t.put("app/components/search/search.html",'<div class="search_icon"><md-icon md-svg-src="./assets/images/search_icon_white.svg" ng-show="vm.isIconWhite"></md-icon><md-icon md-svg-src="./assets/images/search_icon_black.svg" ng-show="!vm.isIconWhite"></md-icon></div><md-autocomplete md-selected-item="vm.selectedItem" md-selected-item-change="vm.selectedItemChange(item)" md-search-text="vm.searchText" md-search-text-change="vm.searchTextChange(vm.searchText)" md-items="item in vm.querySearch(vm.searchText)" md-item-text="" placeholder="Search" md-delay="300" focus=""><md-item-template layout="row" layout-align="start center"><img ng-show="item.iconType === \'img\'" ng-src="{{ item.icon }}" class="result_icon"><div ng-show="item.iconType === \'div\'" class="markerSmartCitizenOnline result_icon"></div><span ng-class="{\'result_name\': item.name.length > 0}">{{ item.name }}</span> <span class="result_location">{{ item.location }}</span></md-item-template></md-autocomplete>'),t.put("app/components/signup/signup.html",'<md-button class="md-icon-button" ng-click="vm.showSignup($event)">Sign Up</md-button>'),t.put("app/components/signup/signupModal.html",'<md-dialog><md-dialog-content class="modal signup"><md-progress-circular ng-show="waitingFromServer" class="md-hue-3 login_spinner" md-mode="indeterminate"></md-progress-circular><md-button class="close_icon"><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="cancel()" class=""></md-icon></md-button><form name="form" novalidate="" ng-submit="vm.answer(vm.form)"><div class="modal_content_container"><h2>SIGN UP</h2><div class="modal_message"><p class="header">People looking for a better city</p><p class="subheader">You\'re part of them? Feel free to join us!</p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Username</label> <input type="text" ng-model="vm.user.username" focus-input=""></md-input-container><p class="errors" ng-show="!!errors.username.length"><span ng-repeat="error in errors.username">Username {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Password</label> <input type="password" ng-model="vm.user.password"></md-input-container><p class="errors" ng-show="!!errors.password.length"><span ng-repeat="error in errors.password">Password {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Email</label> <input type="email" ng-model="vm.user.email"></md-input-container><p class="errors" ng-show="!!errors.email.length"><span ng-repeat="error in errors.email">Email {{ error }}<span ng-if="!$last">,</span></span></p></div></div><md-button class="md-flat md-primary main" ng-click="answer(vm.user)">Sign up</md-button></form></md-dialog-content><p class="message_below"><span class="message_below_question">Already have an account?</span><md-button class="message_below_link" ng-click="openLogin()">LOG IN</md-button></p></md-dialog>'),t.put("app/components/store/store.html",'<md-button class="md-flat full_height" ng-class="{navbar_highlight_button: isLoggedin}" ng-click="showStore($event)">Get your Kit</md-button>'),t.put("app/components/store/storeModal.html",'<md-dialog><md-dialog-content class="modal modal_store"><md-progress-circular ng-show="waitingFromServer" class="md-hue-3 login_spinner" md-mode="indeterminate"></md-progress-circular><md-button class="close_icon" aria-label=""><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="hide()" class=""></md-icon></md-button><div><div class="modal_content_container"><h2>SHOP</h2><div class="modal_message"><p class="header store">Get your Smartcitizen Kit</p><p class="subheader store">An Open-Source Environmental Monitoring Platform consisting of arduino-compatible hardware, data visualization web API, and mobile app.</p></div><div class="main_content" layout="row" layout-align="space-between center" layout-padding=""><img class="store_itemImage" src="assets/images/sckit_avatar.jpg" alt="Smartcitizen Kit"><div class="store_itemDescription"><h3 class="store_itemDescription_title">This is what you get</h3><ul><li>Free web platform registration</li><li>Private RESTful API Key</li><li>Ambient Board</li><li>Data-Processing Board Arduino compatible</li><li>Android App (iOS comming soon!)</li></ul></div></div></div><div><form action="https://www.paypal.com/cgi-bin/webscr" method="post" data-ajax="no" target="_top"><input type="hidden" name="cmd" value="_s-xclick"> <input type="hidden" name="hosted_button_id" value="ZKWC47Y7FPPLE"> <input type="hidden" name="os0" value="Sensor Kit (with Ambient Sensor Board)"> <input type="hidden" name="currency_code" value="EUR"><md-button type="submit" name="submit" class="md-flat md-primary main">ORDER WITH PAYPAL</md-button><img alt="" border="0" src="https://www.paypalobjects.com/es_ES/i/scr/pixel.gif" width="1" height="1"></form></div></div></md-dialog-content></md-dialog>'),t.put("app/components/userProfile/userProfile.html",'<section class="profile_state"><div class="profile_header" layout="row" layout-align="start center"><img ng-src="{{ vm.user.avatar || \'./assets/images/user_details_icon.svg\' }}" class="profile_header_avatar"><div class="profile_header_content"><div class="profile_header_name">{{ vm.user.username }}</div><div class="profile_header_location"><md-icon md-svg-src="./assets/images/location_icon_light.svg" class="profile_header_content_avatar"></md-icon><span><span ng-if="vm.user.city">{{ vm.user.city }}</span> <span ng-if="vm.user.city && vm.user.country">,</span> <span ng-if="vm.user.country">{{ vm.user.country }}</span> <span ng-if="!vm.user.city && !vm.user.country">No data</span></span></div><div class="profile_header_url"><md-icon md-svg-src="./assets/images/url_icon_light.svg" class="profile_header_content_avatar"></md-icon><a ng-href="{{ vm.user.url || \'http://example.com\' }}">{{ vm.user.url || \'No data\' }}</a></div></div></div><div class="profile_content" layout="row"><div class="profile_sidebar"><p class="profile_sidebar_title">FILTER KITS BY</p><div class="profile_sidebar_options"><md-button ng-click="vm.filterKits(\'all\')" class="profile_sidebar_button">ALL</md-button><md-button ng-click="vm.filterKits(\'online\')" class="profile_sidebar_button">ONLINE</md-button><md-button ng-click="vm.filterKits(\'offline\')" class="profile_sidebar_button">OFFLINE</md-button></div></div><div class="profile_content_main" flex=""><div class="profile_content_main_top"><span class="profile_content_main_title">{{ vm.filteredKits.length || 0 }} kits filtering by {{ vm.status.toUpperCase() || \'ALL\' }}</span></div><div class="profile_content_main_kits"><div class="kitList_parent" ng-repeat="kit in (vm.filteredKits = (vm.kits | filterLabel: vm.status))" layout="row" layout-align="start center"><md-button class="kitList kitList_primary" ng-href="./kits/{{kit.id}}" layout="row" layout-align="start center" ng-class="{kitList_borderBottom: $last}"><div class="kitList_container" layout="row" layout-align="start center"><div><img class="kitList_avatar" ng-src="{{ kit.avatar || \'./assets/images/avatar.svg\' }}"></div><div class="kitList_content"><div class="kitList_name">{{ kit.name || \'No name\'}}</div><div class="kitList_data"><md-icon class="kitList_icon" md-svg-src="./assets/images/location_icon_light.svg"></md-icon><span>{{ kit.location || \'No location\'}}</span><md-icon class="kitList_icon" md-svg-src="./assets/images/sensor_icon.svg"></md-icon><span>{{ kit.type }}</span></div></div><div class="kitList_right" layout="row" layout-align="end center"><div class="chips"><div class="chip kit_tag" ng-repeat="tag in kit.labels"><span class="chip_name">{{ tag }}</span></div><div class="chip kit_tag" ng-repeat="userTag in kit.userTags"><span class="chip_name">{{ userTag }}</span></div></div></div></div></md-button></div><div class="kitList kitList_primary kitList_borderBottom" ng-show="!vm.kits.length"><div class="kitList_container"><div class="kitList_noKits"><span>There are not kits yet</span></div></div></div></div></div></div></section>'),t.put("app/components/kit/editKit/editKit.html",'<section class="kit_dataChange"><section class="timeline" flex="1" layout="row" layout-align="center center"><div class="timeline_container" layout="row" layout-align="space-between center"><div layout="row" layout-align="start center"><div class="timeline_stepCircle is-on" layout="row" layout-align="center center">1</div><div class="timeline_stepName">Kit data</div></div><md-button class="md-flat md-primary timeline_buttonSave" ng-click="vm.submitForm()">Save</md-button></div></section><section class="timeline_content" flex="1"><form><section class="form_block form_blockNormal isEven"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_image"><img src="assets/images/basic_info.svg" alt=""></div><div class="form_blockContent_text"><h2>Basic information</h2><p>Please, provide kit basic info. That includes a name, its elevation and exposure</p></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_container"><md-input-container><label>Kit Name</label> <input type="text" ng-model="vm.kitForm.name"></md-input-container><div layout="row" layout-align="space-between start"><md-input-container><label>Elevation</label> <input type="text" ng-model="vm.kitForm.elevation"></md-input-container><div class="form_blockInput_select"><label>Exposure:</label><md-select ng-model="vm.kitForm.exposure" placeholder="Select exposure"><md-option ng-repeat="exposure in vm.exposure" ng-value="{{ exposure.value }}">{{ exposure.name }}</md-option></md-select></div></div></div></div></div></section><section class="form_block form_blockMap"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_image"><img src="assets/images/basic_info.svg" alt=""></div><div class="form_blockContent_text"><h2>Kit location</h2><p>Please, type your kit location. If you prefer you can turn off the auto complete search functionality to specify your latitude and longitude.</p></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_button" ng-if="!vm.kitForm.location.lat && !vm.kitForm.location.lng"><div class="form_blockInput_container" layout="row" layout-align="center center"><md-button class="md-flat md-primary" ng-click="vm.getLocation()">Get your location</md-button></div></div><div class="form_blockInput_map" ng-if="vm.kitForm.location.lat && vm.kitForm.location.lng"><leaflet center="vm.kitForm.location" defaults="vm.defaults" markers="vm.markers" tiles="vm.tiles" width="100%" height="100%"></leaflet></div></div></div></section><section class="form_block form_blockNormal isEven"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_image"><img src="assets/images/basic_info.svg" alt=""></div><div class="form_blockContent_text"><h2>Kit tags</h2><p>Kits can be grouped by tags. Choose from the available tags or submit a tag request to our Support Team.</p></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_container"><div><md-select ng-model="vm.tag" placeholder="Select tag"><md-option ng-value="{{ tag.id }}" ng-repeat="tag in vm.tags">{{ tag.name }}</md-option></md-select></div><div class="form_blockInput_chips"><div class="chips" layout="row" layout-align="start center"><div class="chip kit_tag" ng-repeat="tag in vm.kitForm.tags"><span class="chip_name">{{ tag }}</span> <button class="chip_icon" ng-click="vm.removeTag(tag.id)" arial-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg"></md-icon></button></div></div></div></div></div></div></section><section class="form_block form_blockNormal"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_image"><img src="assets/images/basic_info.svg" alt=""></div><div class="form_blockContent_text"><h2>Kit description</h2><p>Say something nice about your kit. Why is it for? Is this part of any kind of project? Whatever :)</p></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_container"><md-input-container><label>Description</label> <textarea type="text" ng-model="vm.kitForm.description" placeholder="Describe your kit" md-maxlength="120"></textarea></md-input-container></div></div></div></section></form><md-button class="md-primary timeline_button timeline_buttonOpen" ng-click="vm.openKitSetup()">Open kit set up</md-button><div id="setuptool"></div></section></section>'),t.put("app/components/kit/newKit/newKit.html",'<section class="kit_dataChange"><section class="timeline" flex="1" layout="row" layout-align="center center"><div class="timeline_container" layout="row" layout-align="center start"><div layout="column" layout-align="start center"><div class="timeline_stepCircle" layout="row" layout-align="center center" ng-class="{\'is-on\': vm.step === 1, \'is-off\': vm.step !== 1}">1</div><div class="timeline_stepName vertical">Kit data</div></div><div class="timeline_line"></div><div layout="column" layout-align="start center"><div class="timeline_stepCircle" layout="row" layout-align="center center" ng-class="{\'is-on\': vm.step === 2, \'is-off\': vm.step !== 2}">2</div><div class="timeline_stepName vertical">Set up</div></div></div></section><section class="timeline_content" flex="1"><section ng-if="vm.step === 1"><form><section class="form_block form_blockNormal isEven"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_image"><img src="assets/images/basic_info.svg" alt=""></div><div class="form_blockContent_text"><h2>Basic information</h2><p>Please, provide kit basic info. That includes a name, its elevation and exposure</p></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_container"><md-input-container><label>Kit Name</label> <input type="text" ng-model="vm.kitForm.name"><div class="form_errors"><div ng-repeat="error in vm.errors.name">Name {{ error }}</div></div></md-input-container><div layout="row" layout-align="space-between start"><md-input-container><label>Elevation</label> <input type="text" ng-model="vm.kitForm.elevation"></md-input-container><div class="form_blockInput_select"><label>Exposure:</label><md-select ng-model="vm.kitForm.exposure" placeholder="Select exposure"><md-option ng-repeat="exposure in vm.exposure" ng-value="{{ exposure.value }}">{{ exposure.name }}</md-option></md-select></div></div></div></div></div></section><section class="form_block form_blockMap"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_image"><img src="assets/images/basic_info.svg" alt=""></div><div class="form_blockContent_text"><h2>Kit location</h2><p>Please, type your kit location. If you prefer you can turn off the auto complete search functionality to specify your latitude and longitude.</p></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_button" ng-if="!vm.kitForm.location.lat && !vm.kitForm.location.lng"><div class="form_blockInput_container" layout="row" layout-align="center center"><md-button class="md-flat md-primary" ng-click="vm.getLocation()">Get your location</md-button></div></div><div class="form_blockInput_map" ng-if="vm.kitForm.location.lat && vm.kitForm.location.lng"><leaflet center="vm.kitForm.location" defaults="vm.defaults" markers="vm.markers" tiles="vm.tiles" width="100%" height="100%"></leaflet></div></div></div></section><section class="form_block form_blockNormal isEven"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_image"><img src="assets/images/basic_info.svg" alt=""></div><div class="form_blockContent_text"><h2>Kit tags</h2><p>Kits can be grouped by tags. Choose from the available tags or submit a tag request to our Support Team.</p></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_container"><div><md-select ng-model="vm.tag" placeholder="Select tag"><md-option ng-value="{{ tag.id }}" ng-repeat="tag in vm.tags">{{ tag.name }}</md-option></md-select></div><div class="form_blockInput_chips"><div class="chips" layout="row" layout-align="start center"><div class="chip kit_tag" ng-repeat="tag in vm.kitForm.tags"><span class="chip_name">{{ tag.name }}</span> <button class="chip_icon" ng-click="vm.removeTag(tag.id)" arial-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg"></md-icon></button></div></div></div></div></div></div></section><section class="form_block form_blockNormal"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_image"><img src="assets/images/basic_info.svg" alt=""></div><div class="form_blockContent_text"><h2>Kit description</h2><p>Say something nice about your kit. Why is it for? Is this part of any kind of project? Whatever :)</p></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_container"><md-input-container><label>Description</label> <textarea type="text" ng-model="vm.kitForm.description" placeholder="Describe your kit" md-maxlength="120"></textarea></md-input-container></div></div></div></section></form><md-button class="md-flat md-primary timeline_button" ng-click="vm.submitStepOne()">Next</md-button></section><section class="timeline_content" ng-if="vm.step === 2"><div id="setuptool"></div></section></section></section>'),t.put("app/components/kit/showKit/showKit.html",'<section class="kit_data" change-content-margin=""><section class="kit_menu" layout="row" layout-align="center center" stick=""><div class="container" layout="row" layout-align="space-between center"><div><div class="kit_user" layout="row" layout-align="start center"><img ng-src="{{ vm.kit.owner.avatar || \'./assets/images/avatar.svg\'}}"> <a href="./users/{{vm.kit.owner.id}}"><span>{{ vm.kit.owner.username}}</span></a></div><div class="kit_name" layout="row" layout-align="start center"><img ng-src="./assets/images/sensor_icon.svg"> <span>{{ vm.kit.name }}</span></div><div class="kit_battery" layout="row" layout-align="start center"><md-icon md-svg-src="{{ vm.battery.icon }}"></md-icon><span>{{ vm.battery.value }} {{ vm.battery.unit }}</span></div></div><div class="kit_time" layout="row" layout-align="start center"><span>Last data received: {{ vm.kit.timeParsed }}</span></div><div class="kit_navbar" layout="row" layout-align="start center" active-button=""><md-button href="#" class="md-flat chart_icon" aria-label=""><md-icon md-svg-src="./assets/images/chart_icon.svg"></md-icon></md-button><md-button href="#" class="md-flat kit_details_icon" aria-label=""><md-icon md-svg-src="./assets/images/kit_details_icon_light.svg"></md-icon></md-button><md-button href="#" class="md-flat user_details" aria-label=""><md-icon md-svg-src="./assets/images/user_details_icon.svg"></md-icon></md-button><md-button href="#" class="md-flat discussion_icon" aria-label=""><md-icon md-svg-src="./assets/images/discussion_icon.svg"></md-icon></md-button></div></div></section><section class="kit_fixed" move-down=""><div no-data-backdrop=""></div><section class="kit_overview"><md-button ng-click="vm.slide(\'right\')" class="md-flat button_scroll button_scroll_left" layout="column" layout-align="center center" aria-label=""><md-icon md-svg-src="./assets/images/arrow_left_icon.svg"></md-icon></md-button><div class="sensors_container" layout="row" layout-align="center center" horizontal-scroll=""><div ng-repeat="sensor in vm.sensors" class="sensor_container" ng-click="vm.showSensorOnChart(sensor.id)"><div layout="row"><div><md-icon md-svg-src="{{ sensor.icon }}" class="sensor_icon" flex="20"></md-icon></div><div class="sensor_value" ng-class="{sensor_value_null: sensor.value === \'N/A\'}">{{ sensor.value }}</div><div class="sensor_right"><div class="sensor_unit">{{ sensor.unit }}</div><md-icon md-svg-src="{{ sensor.arrow }}" class="sensor_arrow"></md-icon></div></div><div class="sensor_name">{{ sensor.name }}</div></div></div><md-button ng-click="vm.slide(\'left\')" class="md-flat button_scroll button_scroll_right" layout="column" layout-align="center center" aria-label=""><md-icon md-svg-src="./assets/images/arrow_right_icon.svg"></md-icon></md-button></section><section class="kit_detailed"><section class="kit_chart"><div class="container" layout="row"><div class="kit_chart_left"><div class="sensor_select"><md-icon md-svg-src="{{ vm.selectedSensorData.icon }}" class="sensor_icon_selected"></md-icon><md-select placeholder="Choose sensor" ng-model="vm.selectedSensor"><md-option ng-repeat="sensor in vm.sensors" ng-value="{{sensor.id}}" ng-selected="$first"><img class="select_image" ng-src="{{ sensor.icon }}"> <span>{{ sensor.name }}</span></md-option></md-select></div><div class="sensor_data" show-popup-info=""><span class="sensor_value">{{ vm.selectedSensorData.value }}</span> <span class="sensor_unit">{{ vm.selectedSensorData.unit }}</span></div><div class="sensor_data_description" hide-popup-info="">This is the latest value received</div><div class="sensor_description"><h6>{{ vm.selectedSensorData.name }}</h6><div class="sensor_description_content"><p class="sensor_description_preview">{{ vm.selectedSensorData.previewDescription }}<a href="#" ng-show="vm.selectedSensorData.previewDescription.length > 140" show-popup="">More info</a></p><p class="sensor_description_full" hide-popup="">{{ vm.selectedSensorData.fullDescription }}</p></div></div><div class="sensor_compare"><p><span>Compare with</span><md-select placeholder="NONE" ng-model="vm.selectedSensorToCompare"><md-option ng-repeat="sensor in vm.sensorsToCompare" ng-value="{{sensor.id}}"><img class="select_image" ng-src="{{ sensor.icon }}"> <span class="sensor_name">{{ sensor.name }}</span></md-option></md-select></p></div></div><div class="kit_chart_right" flex=""><div class="chart_navigation" layout="row" layout-align="end center"><span class="kit_time" layout="row" layout-align="center center"><md-icon class="kit_time_icon" md-svg-src="./assets/images/update_icon.svg"></md-icon><span>{{ vm.kit.timeAgo }}</span></span><div class="picker_container" layout="row" layout-align="center center"><label for="picker_from">From:</label> <input type="text" id="picker_from" class="date_picker" placeholder="FROM"></div><div class="picker_container" layout="row" layout-align="center center"><label for="picker_to">To:</label> <input type="text" id="picker_to" class="date_picker" placeholder="TO"></div><div class="chart_move" layout="row" layout-align="center center"><md-button href="#" ng-click="vm.moveChart(\'left\')" class="chart_move_button chart_move_left" aria-label="" layout="row" layout-align="center center"><md-icon md-svg-src="./assets/images/arrow_left_icon.svg"></md-icon></md-button><md-button href="#" ng-click="vm.moveChart(\'right\')" class="chart_move_button chart_move_right" aria-label="" layout="row" layout-align="center center"><md-icon md-svg-src="./assets/images/arrow_right_icon.svg"></md-icon></md-button></div></div><md-progress-circular ng-show="vm.loadingChart" class="md-hue-3 chart_spinner" md-mode="indeterminate"></md-progress-circular><div chart="" class="chart_container" chart-data="vm.chartDataMain"></div></div></div></section><section class="kit_details"><div class="kit_detailed_content_container"><div class="kit_detailed_title_container"><md-icon class="kit_detailed_icon_title" md-svg-src="./assets/images/kit_details_icon_normal.svg"></md-icon><h2 class="kit_detailed_title">KIT DETAILS</h2></div><div class="kit_detailed_content_container" layout="row"><div class="kit_detailed_avatar"><img ng-src="{{ vm.kit.avatar || \'./assets/images/avatar.svg\' }}"></div><div class="kit_details_content_main" flex=""><div class="kit_details_content"><h3 class="kit_detailed_name kit_details_name">{{ vm.kit.name }}</h3><p class="kit_details_location"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/location_icon_normal.svg"></md-icon><span>{{ vm.kit.location || \'No location\' }}</span></p><p class="kit_details_type"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/kit_details_icon_normal.svg"></md-icon><span>{{ vm.kit.type }}</span> <span class="kit_details_version"><span>SCK:</span> {{ vm.kit.version }}</span> <span class="kit_details_id"><span>ID:</span> {{ vm.kit.id }}</span></p><p class="kit_details_lastTime"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/update_icon.svg"></md-icon><span>{{ vm.kit.timeAgo }}</span></p><p class="kit_details_labels"><span ng-repeat="label in vm.kit.labels">{{ label }}</span> <span ng-repeat="tag in vm.kit.userTags">{{ tag }}</span></p><div class="kit_details_description"><h4 class="kit_details_description_title">Kit Description:</h4><p class="kit_details_description_content">{{ vm.kit.description || \'No data\' }}</p></div></div></div><div class="kit_details_manage" ng-if="vm.kitBelongsToUser" flex=""><div class="kit_details_manage_buttons"><md-button ng-href="/kits/new?step=2" class="kit_details_button_setup" aria-label="">SET UP</md-button><md-button ng-href="/kits/edit/{{vm.kit.id}}" class="kit_details_button_edit" aria-label="">EDIT</md-button><md-button ng-click="vm.removeUser()" class="kit_details_button_delete" aria-label="">DELETE</md-button></div><div class="kit_details_manage_data"><div class="kit_details_macaddress data_container"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/mac_address_icon.svg"></md-icon><span class="kit_details_manage_data_name">Mac Address:</span> <span>{{ vm.kit.macAddress }}</span></div><div class="kit_details_debug data_container"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/debug_icon.svg"></md-icon><span class="kit_details_manage_data_name">Debug mode:</span> <span>Enabled</span></div><div class="kit_details_key" layout="row" layout-align="start center"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/key_icon.svg"></md-icon><span class="kit_details_manage_data_name">API Key:</span><div class="kit_details_key_number">{{ 32323 }}</div><md-button class="kit_details_key_refreshButton" aria-label=""><md-icon class="" md-svg-src="./assets/images/refresh_icon_white.svg"></md-icon></md-button></div><div class="clearfix"></div><div class="kit_details_download data_container"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/download_icon.svg"></md-icon><span class="kit_details_manage_data_name">Download Data</span> <span>Choose your format</span></div></div></div><div class="kit_details_notAuth" ng-if="!vm.kitBelongsToUser" flex=""><h3 class="kit_details_notAuth_title">People looking for a better city</h3><small class="kit_details_notAuth_subheader">You\'re part of them? Feel free to join us!</small><p class="kit_details_notAuth_description">Smart Citizen is a a platform to generate participatory processes of the people in the cities. Connecting data, people and knowledge, the objective of the platform is to serve as a node for building productive open indicators and distributed tools, and thereafter the collective construction of the city for its own inhabitants.</p><md-button class="kit_details_notAuth_button">GET YOUR KIT AND JOIN US</md-button></div></div></div></section><section class="kit_owner"><div class="kit_detailed_content_container"><div class="kit_detailed_title_container"><md-icon class="kit_detailed_icon_title" md-svg-src="./assets/images/user_details_icon.svg"></md-icon><h2 class="kit_detailed_title">KIT OWNER</h2></div><div class="kit_detailed_content_container" layout="row"><div class="kit_detailed_avatar"><img ng-src="{{ vm.kit.owner.avatar || \'./assets/images/avatar.svg\' }}"></div><div class="kit_owner_content"><div class="kit_owner_info"><a href="./users/{{vm.kit.owner.id}}" class="kit_owner_usernameLink"><h3 class="kit_owner_usernameText">{{ vm.kit.owner.username }}</h3></a><p class="kit_owner_location"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/location_icon_normal.svg"></md-icon><span><span ng-if="vm.kit.owner.city">{{ vm.kit.owner.city }}</span> <span ng-if="vm.kit.owner.city && vm.kit.owner.country">,</span> <span ng-if="vm.kit.owner.country">{{ vm.kit.owner.country }}</span> <span ng-if="!vm.kit.owner.city && !vm.kit.owner.country">No location</span></span></p><p class="kit_owner_url"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/url_icon_normal.svg"></md-icon><a ng-href="{{ vm.kit.owner.url }}">{{ vm.kit.owner.url || \'No URL\'}}</a></p></div><div class="kit_owner_kits"><h3 class="kit_owner_kits_title">Kits of {{ vm.kit.owner.username }}</h3><div class="kitList_parent" layout="row" layout-align="start center" ng-repeat="kit in vm.ownerKits | limitTo: 5"><md-button ng-href="./kits/{{kit.id}}" class="kitList" ng-class="{kitList_primary: !vm.kitBelongsToUser, kitList_secondary: vm.kitBelongsToUser, kitList_borderBottom: $last}" layout="row" layout-align="start center"><div class="kitList_container" layout="row" layout-align="start center"><div class=""><img class="kitList_avatar" ng-src="{{ kit.avatar || \'./assets/images/avatar.svg\' }}"></div><div class="kitList_content"><p class="kitList_name">{{ kit.name || \'No name\' }}</p><p class="kitList_data"><md-icon class="kitList_icon" md-svg-src="./assets/images/location_icon_light.svg"></md-icon><span>{{ kit.location || \'No location\' }}</span><md-icon class="kitList_icon" md-svg-src="./assets/images/sensor_icon.svg"></md-icon><span>{{ kit.type || \'Unknown Kit\'}}</span></p></div><div class="kitList_right" layout="row" layout-align="end center"><div class="chips"><div class="chip kit_tag" ng-repeat="tag in kit.labels"><span class="chip_name">{{ tag }}</span></div><div class="chip kit_tag" ng-repeat="userTag in kit.userTags"><span class="chip_name">{{ userTag }}</span></div></div><div class="kitList_state kitList_state_{{ kit.state.className }}" ng-if="vm.kitBelongsToUser && (kit.state.name === \'never published\' || kit.state.name === \'not configured\')" layout="row" layout-align="center center"><span>{{ kit.state.name }}</span></div></div></div></md-button><div class="kitList_config" ng-if="vm.kitBelongsToUser" layout="row" layout-align="center center"><md-button class="kitList_dropdownButton" aria-label="" dropdown-menu="kit.dropdownOptions" dropdown-model="vm.dropdownSelected" dropdown-item-label="text"><img src="./assets/images/config_icon.svg"></md-button></div></div><md-button ng-href="/users/{{ vm.kit.owner.id }}" ng-if="vm.ownerKits.length > 5" class="kit_owner_kits_more_button" aria-label="">VIEW ALL KITS OF {{ vm.kit.owner.username }}</md-button></div></div></div></div><div class="clearfix"></div></section><section class="kit_comments"><div class="kit_detailed_content_container"><div class="kit_detailed_title_container"><md-icon class="kit_detailed_icon_title" md-svg-src="./assets/images/discussion_icon.svg"></md-icon><h2 class="kit_detailed_title">DISCUSSION</h2></div><div class="kit_detailed_content_container" ng-include="\'app/components/disqus/disqus.html\'"></div></div></section></section></section></section>'),t.put("app/core/animation/backdrop/loadingBackdrop.html",'<md-backdrop ng-if="vm.isViewLoading || vm.mapStateLoading" ng-class="{\'md-mainBackdrop\': vm.isViewLoading, \'md-stateChangeBackdrop\': vm.mapStateLoading}"><md-icon ng-if="vm.isViewLoading" md-svg-src="./assets/images/LogotipoSmartCitizen.svg" class="backdrop_icon"></md-icon><md-progress-circular class="md-hue-3 backdrop_spinner" md-mode="indeterminate"></md-progress-circular></md-backdrop>'),t.put("app/core/animation/backdrop/noDataBackdrop.html",'<md-backdrop ng-if="vm.kitWithoutData" class="md-noDataBackdrop"><div class="block" layout="column" layout-align="center center"><div ng-if="vm.user === \'visitor\'"><h2 class="title">This kit hasn’t still said a word 👶</h2><p class="message"><a href="#disqus_thread">Leave a commment</a> below to let its owner know</p></div><div ng-if="vm.user === \'owner\'"><h2 class="title">This kit has still not posted any data 🔧🔩🔨</h2><p class="message">Please, <a href="#disqus_thread">check kit settings</a> or reach the support team.</p></div></div></md-backdrop>')
}]);