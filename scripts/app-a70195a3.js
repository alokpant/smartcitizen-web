!function(){"use strict";angular.module("app.components",["oauth","leaflet-directive"])}(),function(){"use strict";function t(t,e){function n(t){var e={kitName:t.device.name,kitType:o(t),kitLastTime:moment(r(t)).fromNow(),kitLocation:a(t),kitLabels:s(t),kitClass:i(o(t))};return e}function a(t){var e="",n=t.data.location.city,a=t.data.location.country;return n&&(e+=n),a&&(e+=", "+a),e}function s(t){return{status:t.status,exposure:t.data.location.exposure}}function o(t){var e;return new RegExp("sck","i").test(t.kit.name)&&(e="SmartCitizen Kit"),e}function i(t){return t?t.toLowerCase().split(" ").join("_"):""}function r(t){return t.updated_at}function c(t){return moment(t.recorded_at).format("")}function l(t){return moment(t).format("YYYY-MM-DDThh:mm:ss")+"Z"}function u(n,a){var s=0,o=[];n.forEach(function(i,r){t.getDevice(i).then(function(t){o[r]=new e(t,{type:"preview"}),s++,n.length===s&&a(o)})})}var d={parseKit:n,parseKitTime:r,parseSensorTime:c,convertTime:l,getOwnerKits:u};return d}angular.module("app.components").factory("utils",t),t.$inject=["device","Kit"]}(),function(){"use strict";function t(){return{scope:{show:"="},restrict:"A",controller:"SignupController",controllerAs:"vm",templateUrl:"app/components/signup/signup.html"}}angular.module("app.components").directive("signup",t)}(),function(){"use strict";function t(t,e,n,a,s){function o(){e.show({hasBackdrop:!0,controller:"SignupDialogController",templateUrl:"app/components/signup/signupModal.html",clickOutsideToClose:!0}).then(function(){})["finally"](function(){})}function i(t){n.post(t).then(function(){s.success("Signup was successful")})["catch"](function(t){console.log("err",t.data.errors)})}var r=this;r.showSignup=o,r.signup=i,r.errors={}}angular.module("app.components").controller("SignupController",t),t.$inject=["$scope","$mdDialog","user","animation","alert"]}(),function(){"use strict";function t(){function t(){}return{link:t,scope:!0,restrict:"E",templateUrl:"app/components/search/search.html",controller:"SearchController",controllerAs:"vm"}}angular.module("app.components").directive("search",t)}(),function(){"use strict";function t(t,e){function n(){}function a(){}function s(t){return e.globalSearch(t).then(function(t){return 0===t.length?(angular.element(document.body).css("overflow","auto"),t):(angular.element(document.body).css("overflow","hidden"),t.map(function(t){if("Location"!==t.type){var e=o(t),n=i(t);return{type:t.type,name:n,location:e,image:"User"===t.type?"./assets/images/avatar.svg":"./assets/images/kit.svg"}}}))})}function o(t){var e="";return t.city&&(e+=t.city),t.country&&(e+=", "+t.country),e}function i(t){var e="User"===t.type?t.username:t.name;return e?e:"No name"}var r=this;r.searchTextChange=n,r.selectedItemChange=a,r.querySearch=s,r.isIconWhite=!0,t.$on("removeNav",function(){t.$apply(function(){r.isIconWhite=!1})}),t.$on("addNav",function(){t.$apply(function(){r.isIconWhite=!0})})}angular.module("app.components").controller("SearchController",t),t.$inject=["$scope","search"]}(),function(){"use strict";function t(){function t(){}return{link:t,scope:!0,restrict:"E",templateUrl:"app/components/navbar/navbar.html",controller:"NavbarController",controllerAs:"vm"}}angular.module("app.components").directive("navbar",t)}(),function(){"use strict";function t(t,e){function n(){e.logout(),a.isLoggedin=!1}var a=this;a.isShown=!0,a.isLoggedin=!1,a.logout=n,a.dropdownOptions=[{divider:!0,text:"Hello,           "},{text:"PROFILE",value:"1"},{text:"LOGOUT",value:"2"}],a.dropdownSelected,t.$on("removeNav",function(){t.$apply(function(){a.isShown=!1})}),t.$on("addNav",function(){t.$apply(function(){a.isShown=!0})}),t.$on("loggedIn",function(){a.isLoggedin=!0,a.currentUser=e.getCurrentUser().data,a.dropdownOptions[0].text="Hello, "+a.currentUser.username})}angular.module("app.components").controller("NavbarController",t),t.$inject=["$scope","auth"]}(),function(){"use strict";angular.module("app.components")}(),function(){"use strict";function t(t,e,n,a,s,o,i){function r(t){return t.map(function(t){return c(t,!1)})}function c(t){return t.icon="offline"===t.status?d.icons.smartCitizenOffline:d.icons.smartCitizenOnline,t}function l(){var t={defaultIcon:{},smartCitizenNormal:{type:"div",className:"marker_normal",iconSize:[12,12]},smartCitizenOnline:{type:"div",className:"marker_online",iconSize:[12,12]},smartCitizenOffline:{type:"div",className:"marker_offline",iconSize:[12,12]}};return t}function u(t){return t}var d=this,m=u(s[0]);d.icons=l(),d.tiles={url:"https://a.tiles.mapbox.com/v4/tomasdiez.jnbhcnb2/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidG9tYXNkaWV6IiwiYSI6ImRTd01HSGsifQ.loQdtLNQ8GJkJl2LUzzxVg"},d.center={lat:m.lat,lng:m.lng,zoom:12},d.markers=r(s),d.currentMarker=i.getCurrentMarker(),d.defaults={scrollWheelZoom:!1},d.events={map:{enable:["dragend","zoomend","moveend","popupopen","popupclose","mousedown","dblclick","click","touchstart"],logic:"broadcast"}},t.$on("leafletDirectiveMap.popupopen",function(t,n){d.center={lat:n.leafletEvent.popup._latlng.lat,lng:n.leafletEvent.popup._latlng.lng,zoom:n.model.center.zoom};n.leafletEvent.popup._source.options.myData.id;e.go("home.kit",{id:1616})})}angular.module("app.components").controller("MapController",t),t.$inject=["$scope","$state","$timeout","location","initialMarkers","device","marker"]}(),function(){"use strict";function t(){return{scope:{show:"="},restrict:"A",controller:"LoginController",controllerAs:"vm",templateUrl:"app/components/login/login.html"}}angular.module("app.components").directive("login",t)}(),function(){"use strict";function t(t,e){function n(){e.show({hasBackdrop:!0,controller:"LoginDialogController",templateUrl:"app/components/login/loginModal.html",clickOutsideToClose:!0}).then(function(){})["finally"](function(){})}t.showLogin=n}angular.module("app.components").controller("LoginController",t),t.$inject=["$scope","$mdDialog","auth","alert"]}(),function(){"use strict";function t(t,e,n,a,s,o){function i(t){var e=C.kit.owner.kits;a.getOwnerKits(e,function(e){t(e)})}function r(t){return t.time=moment(a.parseKitTime(t)).fromNow(),t}function c(t){var e=angular.element(".sensors_container"),n=e.scrollLeft(),a=20;console.log("scroll",n),"left"===t?e.scrollLeft(n+a):"right"===t&&e.scrollLeft(n-a)}function l(){return C.sensorsToCompare.filter(function(t){return t.id!==C.selectedSensor})}function u(t,e,n){if(e[0]){if(!T){if(t="date",!n)var n={};n.from=D.getValuePickerFrom(),n.to=D.getValuePickerTo()}"date"===t?(C.loadingChart=!0,d(n.from,n.to).then(function(){C.chartDataMain=m(e)})):"sensor"===t&&(C.chartDataMain=m(e))}}function d(t,n){var a=e.id;return s.getSensorsData(a,t,n).then(function(t){T=t.readings})}function m(t){var e=p(T,t[0]),n={data:e,color:C.selectedSensorData.color,unit:C.selectedSensorData.unit};if(t[1]&&-1!==t[1])var a=p(T,t[1]),s={data:a,color:C.selectedSensorToCompareData.color,unit:C.selectedSensorToCompareData.unit};var o=[n,s];return o}function p(t,e){return 0===t.length?[]:t.map(function(t){var n=t&&t.timestamp,a=t&&t.data[e];return a=null===a?0:a,{time:n,data:a}})}function v(t){var e=t.value;void 0!==e&&("main"===t.type?S=e:"compare"===t.type&&(x=e))}function g(){var t=angular.element(".sensor_icon_selected"),e=t.find(".container_parent");e.css("fill",C.selectedSensorData.color)}function f(){var t=angular.element(".sensor_compare").find("md-select-label").find("span");t.css("color",C.selectedSensorToCompareData.color||"white");var e=angular.element(".sensor_compare").find("md-select-label").find(".md-select-icon");e.css("color","white")}function _(){var t=angular.element(".chart_move_left").find("svg");t.find(".fill_container").css("fill","#03252D");var t=angular.element(".chart_move_right").find("svg");t.find(".fill_container").css("fill","#4E656B")}function h(){var t=angular.element(".kit_time_icon");t.find(".stroke_container").css({"stroke-width":"0.5px",stroke:"#A4B0B3"}),t.find(".fill_container").css("fill","#A4B0B3")}function k(t){return new Date(t).getTime()}function w(){return k(D.getValuePickerTo())-k(D.getValuePickerFrom())}function b(t){var e=w();if("left"===t){var n=D.getValuePickerFrom(),a=k(D.getValuePickerFrom())-e;D.setValuePickers([a,n])}else if("right"===t){var n=k(D.getValuePickerTo())+e,a=D.getValuePickerTo();D.setValuePickers([a,n])}}function y(){function t(){return k(new Date)}function e(){return k(t()-6048e5)}var n,a=$("#picker_from").pickadate({container:"body",klass:{holder:"picker__holder picker_container"}}),s=a.pickadate("picker"),o=$("#picker_to").pickadate({container:"body",klass:{holder:"picker__holder picker_container"}}),i=o.pickadate("picker");return s.get("value")&&i.set("min",s.get("select")),i.get("value")&&s.set("max",i.get("select")),s.on("set",function(t){t.select?(i.get("value")&&"single"===n&&u("date",[S,x],{from:s.get("value"),to:i.get("value")}),i.set("min",s.get("select"))):"clear"in t&&i.set("min",!1)}),i.on("set",function(t){t.select?(s.get("value")&&u("date",[S,x],{from:s.get("value"),to:i.get("value")}),s.set("max",i.get("select"))):"clear"in t&&s.set("max",!1)}),i.set("max",new Date),s.set("select",e()),i.set("select",t()),{getValuePickerFrom:function(){return s.get("value")},setValuePickerFrom:function(t){n="single",s.set("select",t)},getValuePickerTo:function(){return i.get("value")},setValuePickerTo:function(t){n="single",i.set("select",t)},setValuePickers:function(t){var e=t[0],a=t[1];n="pair",s.set("select",e),i.set("select",a)}}}var S,x,T,C=this,D=y();C.marker=r(n),C.kit=new o(n);var I=C.kit.getSensors({type:"main"});C.battery=I[1],C.sensors=I[0],C.sensorsToCompare=C.kit.getSensors({type:"compare"}),C.slide=c,C.chartData,C.selectedSensor=C.sensors[0].id,C.selectedSensorData={icon:C.sensors[0].icon,value:C.sensors[0].value,unit:C.sensors[0].unit,color:C.sensors[0].color},C.selectedSensorToCompare,C.selectedSensorToCompareData,C.moveChart=b,C.loadingChart=!1,C.dropdownOptions=[{text:"SET UP",value:"1"},{text:"EDIT",value:"2"}],C.dropdownSelected,t.$watch("vm.selectedSensor",function(t){C.selectedSensorToCompare=void 0,C.selectedSensorToCompareData={},C.chartDataCompare=[],x=void 0,C.sensors.forEach(function(e){e.id===t&&(C.selectedSensorData={icon:e.icon,value:e.value,unit:e.unit,color:e.color})}),C.sensorsToCompare=l(),setTimeout(function(){g(),f(),v({type:"main",value:t}),u("sensor",[S,x])},100)}),t.$watch("vm.selectedSensorToCompare",function(t){C.sensorsToCompare.forEach(function(e){e.id===t&&(C.selectedSensorToCompareData={icon:e.icon,color:e.color,unit:e.unit})}),setTimeout(function(){f(),v({type:"compare",value:t}),u("sensor",[S,x])},100)}),t.$on("hideSpinner",function(){C.loadingChart=!1}),setTimeout(function(){g(),_(),h(),i(function(t){C.ownerKits=t})},1e3)}angular.module("app.components").controller("KitController",t),t.$inject=["$scope","$stateParams","marker","utils","sensor","Kit","$mdDialog"]}(),function(){"use strict";function t(){}angular.module("app.components").controller("HomeController",t)}(),function(){"use strict";function t(t,e,n,a){t.answer=function(s){n.post(s).then(function(t){console.log("data",t),a.success("Signup was successful"),e.hide()})["catch"](function(e){console.log("err",e.data.errors),t.errors=e.data.errors})},t.hide=function(){e.hide()},t.cancel=function(){e.cancel()}}angular.module("app.components").controller("SignupDialogController",t),t.$inject=["$scope","$mdDialog","user","alert"]}(),function(){"use strict";function t(t,e,n,a){t.answer=function(s){n.login(s).then(function(t){console.log("yes",t);var s=t.access_token;n.saveToken(s),a.success("Signup was successful"),e.hide()})["catch"](function(e){console.log("no"),console.log("err",e.data.errors),t.errors=e.data.errors})},t.hide=function(){e.hide()},t.cancel=function(){e.cancel()}}angular.module("app.components").controller("LoginDialogController",t),t.$inject=["$scope","$mdDialog","auth","alert"]}(),function(){"use strict";angular.module("app.components").factory("User",function(){function t(t){_.extend(this,t),this.avatar=this.avatar?this.avatar:"./assets/images/user_details_icon.svg"}return t})}(),function(){"use strict";function t(t){var e,n=t.name,a=t.description;return e=new RegExp("custom circuit","i").test(a)?n:new RegExp("noise","i").test(a)?"SOUND":new RegExp("light","i").test(a)?"LIGHT":new RegExp("wifi","i").test(a)?"NETWORKS":new RegExp("co","i").test(a)?"CO":new RegExp("no2","i").test(a)?"NO2":a,e.toUpperCase()}function e(t){var e;switch(t){case"TEMPERATURE":e="°C";break;case"LIGHT":e="LUX";break;case"SOUND":e="DB";break;case"HUMIDITY":case"BATTERY":e="%";break;case"CO":case"NO2":e="KΩ";break;case"NETWORKS":e="#";break;case"SOLAR PANEL":e="V";break;default:e="N/A"}return e}function n(t){var e=t.value;return e?(e=e.toString(),-1!==e.indexOf(".")&&(e=e.slice(0,e.indexOf(".")+3)),e):"N/A"}function a(t){return t.prev_value}function s(t){switch(t){case"TEMPERATURE":return"./assets/images/temperature_icon.svg";case"HUMIDITY":return"./assets/images/humidity_icon.svg";case"LIGHT":return"./assets/images/light_icon.svg";case"SOUND":return"./assets/images/sound_icon.svg";case"CO":return"./assets/images/co_icon.svg";case"NO2":return"./assets/images/no2_icon.svg";case"NETWORKS":return"./assets/images/networks_icon.svg";case"BATTERY":return"./assets/images/battery_icon.svg";case"SOLAR PANEL":return"./assets/images/solar_panel_icon.svg";default:return"./assets/images/avatar.svg"}}function o(t){var e=n(t),s=a(t);return e>s?"./assets/images/arrow_up_icon.svg":s>e?"./assets/images/arrow_down_icon.svg":"./assets/images/equal_icon.svg"}function i(t){switch(t){case"TEMPERATURE":return"#ffc107";case"HUMIDITY":return"#4fc3f7";case"LIGHT":return"#ffee58";case"SOUND":return"#f06292";case"CO":return"#4caf50";case"NO2":return"#8bc34a";case"NETWORKS":return"#9575cd";case"SOLAR PANEL":return"#fff9c4";default:return"black"}}angular.module("app.components").factory("Sensor",function(){function a(a){this.name=t(a),this.id=a.id,this.unit=e(this.name),this.value=n(a),this.icon=s(this.name),this.arrow=o(a),this.color=i(this.name)}return a})}(),function(){"use strict";function t(t){var e="",n=t.data.location.city,a=t.data.location.country;return n&&(e+=n),a&&(e+=", "+a),e}function e(t){return{status:t.device.status,exposure:t.data.location.exposure}}function n(t){var e;return new RegExp("sck","i").test(t.kit.name)&&(e="SmartCitizen Kit"),e}function a(t){return t?t.toLowerCase().split(" ").join("_"):""}function s(t){return t.updated_at}function o(t){return t.kit.name.match(/[0-9]+.?[0-9]*/)[0]}function i(t){return{username:t.owner.username,kits:t.owner.device_ids,location:t.owner.location.city&&t.owner.location.country?t.owner.location.city+", "+t.owner.location.country:"Barcelona, Spain",url:t.owner.url||"http://www.example.com",avatar:t.owner.avatar||"./assets/images/avatar.svg"}}function r(t){var e=c(t),n=a(e);return{name:e,className:n}}function c(){return"Never published"}angular.module("app.components").factory("Kit",["Sensor",function(c){function l(c,l){l&&"preview"===l.type?(this.name=c.device.name,this.type=n(c),this.location=t(c),this.avatar="./assets/images/avatar.svg",this.state=r(c)):(this.name=c.device.name,this.type=n(c),this.version=o(c),this.avatar="./assets/images/avatar.svg",this.lastTime=moment(s(c)).fromNow(),this.location=t(c),this.labels=e(c),this["class"]=a(n(c)),this.id=c.device.id,this.description=c.description,this.owner=i(c),this.data=c.data.sensors)}return l.prototype.getSensors=function(t){var e=this.data.map(function(t){return new c(t)});return"compare"===t.type&&e.unshift({name:"NONE",color:"white",id:-1}),e.reduce(function(e,n,a,s){return"BATTERY"===n.name&&(s.splice(a,1),"main"===t.type?(e[0]=s,e[1]=n):"compare"===t.type&&(e=s)),e},[])},l}])}(),function(){"use strict";function t(t,e){function n(t,n){setTimeout(function(){a(n[0])},1e3),t.$watch("chartData",function(t){if(t&&void 0!==t){if(t[0]&&t[1]){var a=t[0].data,o=a.map(function(t){return{date:y(t.time),count:t&&t.data}});o.sort(function(t,e){return t.date-e.date});var i=t[1].data,r=i.map(function(t){return{date:y(t.time),count:t&&t.data}});r.sort(function(t,e){return t.date-e.date});var c=[o,r],l=[t[0].color,t[1].color],u=[t[0].unit,t[1].unit];s(c,{type:"both",container:n[0],color:l,unit:u})}else if(t[0]){var d=t[0].data,c=d.map(function(t){return{date:y(t.time),count:t&&t.data}});c.sort(function(t,e){return t.date-e.date});var m=t[0].color,p=t[0].unit;s(c,{type:"main",container:n[0],color:m,unit:p})}e.hideSpinner()}})}function a(t){m={top:20,right:15,bottom:20,left:40},p=t.clientWidth-m.left-m.right,v=t.clientHeight-m.top-m.bottom,f=d3.time.scale().range([0,p]),_=d3.scale.linear().range([v,0]),h=d3.scale.linear().range([v,0]),L=d3.scale.linear().range([v,0]),y=d3.time.format.utc("%Y-%m-%dT%H:%M:%SZ").parse,k=d3.svg.axis().scale(f).orient("bottom").ticks(5),w=d3.svg.axis().scale(_).orient("left").ticks(5),b=d3.svg.axis().scale(h).orient("right").ticks(5),S=d3.svg.area().interpolate("linear").x(function(t){return f(t.date)}).y0(v).y1(function(t){return _(t.count)}),x=d3.svg.line().interpolate("linear").x(function(t){return f(t.date)}).y(function(t){return _(t.count)}),$=d3.svg.area().interpolate("linear").x(function(t){return f(t.date)}).y0(v).y1(function(t){return h(t.count)}),T=d3.svg.line().interpolate("linear").x(function(t){return f(t.date)}).y(function(t){return h(t.count)}),g=d3.select(t).append("svg").attr("width",p+m.left+m.right).attr("height",v+m.top+m.bottom).append("g").attr("transform","translate("+(m.left-m.right)+","+m.top+")")}function s(t,e){"main"===e.type?o(t,e):"both"===e.type&&i(t,e)}function o(t,e){function n(){var n=d3.bisector(function(t){return t.date}).left,a=f.invert(d3.mouse(this)[0]),s=n(t,a,1),o=t[s-1],i=t[s],r=a-o.date>i.date-a?i:o;D.attr("transform","translate("+f(r.date)+", "+_(r.count)+")"),I.attr("transform","translate("+(f(r.date)+80)+", "+(d3.mouse(this)[1]-20)+")");var c=I.select("text"),m=c.select(".popup_main"),p=(m.select(".popup_value").text(l(r.count)),m.select(".popup_unit").text(e.unit),c.select(".popup_date").text(u(r.date))),v=[m,p];d(O,v)}f.domain(d3.extent(t,function(t){return t.date})),_.domain([.8*d3.min(t,function(t){return t.count}),1.2*d3.max(t,function(t){return t.count})]),g.selectAll("*").remove();var a=(d3.select(".chart_container svg"),g.append("svg:defs").append("svg:linearGradient").attr("id","gradient").attr("y1","0%").attr("x1","0%").attr("y2","100%").attr("x2","100%").attr("spreadMethod","pad"));a.append("svg:stop").attr("offset","0%").attr("stop-color","black").attr("stop-opacity",1),a.append("svg:stop").attr("offset","100%").attr("stop-color","white").attr("stop-opacity",1),g.append("path").datum(t).attr("class","chart_area").attr("fill",e.color).attr("d",S),g.append("path").attr("class","chart_line").attr("stroke",e.color).attr("d",x(t)),g.append("g").attr("class","axis x").attr("transform","translate(0,"+v+")").call(k),g.append("g").attr("class","axis y_left").style("fill",e.color).call(w),g.append("g").attr("class","grid").attr("transform","translate(0,"+v+")").call(r().tickSize(-v,0,0).tickFormat("")),g.append("g").attr("class","grid").call(c().tickSize(-p,0,0).tickFormat("")),D=g.append("g").attr("class","focus").style("display","none"),D.append("circle").style("stroke",e.color).attr("r",4.5);var s=84,o=46;I=g.append("g").attr("class","focus").style("display","none"),O=I.append("rect").attr("width",s).attr("height",o).attr("transform",function(){var t="translate(-42, 5)";return t}).style("stroke","grey").style("stroke-width","0.5").style("fill","white");var i=I.append("text").attr("class",""),m=i.append("tspan").attr("class","popup_main").attr("text-anchor","start").attr("x",-s/2).attr("dx",8).attr("y",o/2).attr("dy",3);m.append("tspan").attr("class","popup_value"),m.append("tspan").attr("class","popup_unit").attr("dx",5),i.append("tspan").attr("class","popup_date").attr("x",-s/2).attr("dx",8).attr("y",o-2).attr("dy",0).attr("text-anchor","start"),g.append("rect").attr("class","overlay").attr("width",p).attr("height",v).on("mouseover",function(){I.style("display",null),D.style("display",null)}).on("mouseout",function(){I.style("display","none"),D.style("display","none")}).on("mousemove",n)}function i(t,e){function n(){var n=d3.bisector(function(t){return t.date}).left,a=f.invert(d3.mouse(this)[0]),s=n(t[1],a,1),o=t[1][s-1],i=t[1][s],r=a-o.date>i.date-a?i:o;C.attr("transform","translate("+f(r.date)+", "+h(r.count)+")");var c=t[0][s-1],m=t[0][s],p=a-c.date>m.date-a?m:c;D.attr("transform","translate("+f(p.date)+", "+_(p.count)+")"),I.attr("transform","translate("+(f(r.date)+80)+", "+(d3.mouse(this)[1]-20)+")");var v=I.select("text"),g=v.select(".popup_main");g.select(".popup_value").text(l(p.count)),g.select(".popup_unit").text(e.unit[0]);var k=v.select(".popup_compare");k.select(".popup_value").text(l(r.count)),k.select(".popup_unit").text(e.unit[1]);var w=v.select(".popup_date").text(u(r.date)),b=[g,k,w];d(O,b)}f.domain(d3.extent(t[0],function(t){return t.date})),_.domain([.8*d3.min(t[0],function(t){return t.count}),1.2*d3.max(t[0],function(t){return t.count})]),h.domain([.8*d3.min(t[1],function(t){return t.count}),1.2*d3.max(t[1],function(t){return t.count})]),g.selectAll("*").remove(),g.append("path").datum(t[0]).attr("class","chart_area").attr("fill",e.color[0]).attr("d",S),g.append("path").datum(t[1]).attr("class","chart_area").attr("fill",e.color[1]).attr("d",$),g.append("path").attr("class","chart_line").attr("stroke",e.color[0]).attr("d",x(t[0])),g.append("path").attr("class","chart_line").attr("stroke",e.color[1]).attr("d",T(t[1])),g.append("g").attr("class","axis x").attr("transform","translate(0,"+v+")").call(k),g.append("g").attr("class","axis y_left").style("fill",e.color[0]).call(w),g.append("g").attr("class","axis y_right").style("fill",e.color[1]).attr("transform","translate("+p+" ,0)").call(b),g.append("g").attr("class","grid").attr("transform","translate(0,"+v+")").call(r().tickSize(-v,0,0).tickFormat("")),g.append("g").attr("class","grid").call(c().tickSize(-p,0,0).tickFormat("")),C=g.append("g").attr("class","focus").style("display","none"),D=g.append("g").attr("class","focus").style("display","none"),C.append("circle").style("stroke",e.color[1]).attr("r",4.5),D.append("circle").style("stroke",e.color[0]).attr("r",4.5);var a=84,s=75;I=g.append("g").attr("class","focus").style("display","none"),O=I.append("rect").attr("width",a).attr("height",s).style("min-width","40px").attr("transform",function(){var t="translate(-42, 5)";return t}).style("stroke","grey").style("stroke-width","0.5").style("fill","white"),I.append("rect").attr("width",8).attr("height",2).attr("transform",function(){return"translate("+(-a/2+4).toString()+", 20)"}).style("fill",e.color[0]),I.append("rect").attr("width",8).attr("height",2).attr("transform",function(){return"translate("+(-a/2+4).toString()+", 45)"}).style("fill",e.color[1]);var o=I.append("text").attr("class",""),i=o.append("tspan").attr("class","popup_main").attr("x",-s/2+7).attr("dx",8).attr("y",s/3).attr("dy",3);i.append("tspan").attr("class","popup_value").attr("text-anchor","start"),i.append("tspan").attr("class","popup_unit").attr("dx",5);var m=o.append("tspan").attr("class","popup_compare").attr("x",-s/2+7).attr("dx",8).attr("y",s/1.5).attr("dy",3);m.append("tspan").attr("class","popup_value").attr("text-anchor","start"),m.append("tspan").attr("class","popup_unit").attr("dx",5),o.append("tspan").attr("class","popup_date").attr("x",-a/2).attr("dx",8).attr("y",s-2).attr("dy",0).attr("text-anchor","start"),g.append("rect").attr("class","overlay").attr("width",p).attr("height",v).on("mouseover",function(){C.style("display",null),D.style("display",null),I.style("display",null)}).on("mouseout",function(){C.style("display","none"),D.style("display","none"),I.style("display","none")}).on("mousemove",n)}function r(){return d3.svg.axis().scale(f).orient("bottom").ticks(5)}function c(){return d3.svg.axis().scale(_).orient("left").ticks(5)}function l(t){if(-1!==t.toString().indexOf(".")){var e=t.toString().split(".");return e[0]+"."+e[1].slice(0,2)}return t.toString().slice(0,2)}function u(t){return moment(t).format("ddd Do MMM YYYY")}function d(t,e){function n(t){return t.node().getBBox()}if(e.length){var a=e.reduce(function(t,e){var a=n(e),s=n(t);return s.width>=a.width?t:e},e[0]),s=2*a.attr("dx");t.attr("width",n(a).width+s)}}var m,p,v,g,f,_,h,k,w,b,y,S,x,$,T,C,D,I,L,O;return{link:n,restrict:"A",scope:{chartData:"="}}}angular.module("app.components").directive("chart",t),t.$inject=["sensor","animation"]}(),function(){"use strict";function t(t){return t.all("users")}angular.module("app.components").factory("user",t),t.$inject=["Restangular"]}(),function(){"use strict";function t(t,e){function n(){return t.all("sensors").getList()}function a(t){t=t}function s(){return i}function o(n,a,s){var a=e.convertTime(a),s=e.convertTime(s);return a&&s?t.one("devices",n).customGET("pg_readings",{from:a,to:s,all_intervals:!0}):t.one("devices",n).customGET("pg_readings")}var i;n().then(function(t){console.log("sensors",t.plain()),a(t)});var r={callAPI:n,setTypes:a,getTypes:s,getSensorsData:o};return r}angular.module("app.components").factory("sensor",t),t.$inject=["Restangular","utils"]}(),function(){"use strict";function t(t,e){function n(t){return e.all("search").getList({q:t})}var a={globalSearch:n};return a}angular.module("app.components").factory("search",t),t.$inject=["$http","Restangular"]}(),function(){"use strict";function t(t){function e(t){s=t}function n(){return s}function a(){t.$broadcast("markerLoaded")}var s,o={setCurrentMarker:e,getCurrentMarker:n,dataLoaded:a};return o}angular.module("app.components").factory("marker",t),t.$inject=["$rootScope"]}(),function(){"use strict";function t(t){function e(){return a().success(function(t){var e=t.loc.split(",");return s={lat:parseFloat(e[0]),lng:parseFloat(e[1])}})}function n(){return s}function a(){return t.jsonp("http://ipinfo.io/?callback=JSON_CALLBACK")}var s;e();var o={getPosition:e,callAPI:a,getPositionObj:n};return o}angular.module("app.components").factory("geolocation",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){function e(e){var n="";return n+=e.lat+","+e.lng,t.all("devices").getList({near:n})}function n(){return t.all("devices/world_map").getList()}function a(e){return t.one("devices",e).get()}var s={getDevices:e,getAllDevices:n,getDevice:a};return s}angular.module("app.components").factory("device",t),t.$inject=["Restangular"]}(),function(){"use strict";function t(t,e,n,a){function s(){o()}function o(){m.token=t.localStorage.getItem("smartcitizen.token"),m.token&&d(m.token).then(function(t){m.data=new a(t.plain()),n.$broadcast("loggedIn")})}function i(){return m}function r(){return!!m.token}function c(e){t.localStorage.setItem("smartcitizen.token",e),o()}function l(t){return e.all("sessions").post(t)}function u(){t.localStorage.removeItem("smartcitizen.token")}function d(){return e.all("").customGET("me")}var m={token:null,data:null};setTimeout(function(){s()},1e3);var p={isAuth:r,setCurrentUser:o,getCurrentUser:i,saveToken:c,login:l,logout:u};return p}angular.module("app.components").factory("auth",t),t.$inject=["$window","Restangular","$rootScope","User"]}(),function(){"use strict";function t(){function t(t,e){t.element=e}function e(t){t.slidePosition=0,t.slideSize=20,this.getTimesSlided=function(){return t.slideSize},this.getPosition=function(){return t.slidePosition*t.slideSize},this.decrementPosition=function(){t.slidePosition-=1},this.incrementPosition=function(){t.slidePosition+=1},this.scrollIsValid=function(e){var n=t.element.scrollLeft();return console.log("scrollpos",n),"left"===e?n>0&&t.slidePosition>=0:"right"===e?300>n:void 0}}return e.$inject=["$scope"],{controller:e,link:t}}function e(){function t(t,e,n,a){var s=angular.element(".sensors_container");e.on("click",function(){a.scrollIsValid("left")&&"left"===n.direction?(a.decrementPosition(),s.scrollLeft(a.getPosition()),console.log(a.getPosition())):a.scrollIsValid("right")&&"right"===n.direction&&(a.incrementPosition(),s.scrollLeft(a.getPosition()),console.log(a.getPosition()))})}return{link:t,require:"^slide-menu",restrict:"A",scope:{direction:"@"}}}angular.module("app.components").directive("slide",e).directive("slideMenu",t),e.$inject=[]}(),function(){"use strict";function t(){function t(t){n=t}function e(){return n}var n,a={setKit:t,getKit:e};return a}angular.module("app.components").factory("layout",t)}(),function(){"use strict";function t(t){function e(){t.$broadcast("blur")}function n(){t.$broadcast("unblur")}function a(){t.$broadcast("removeNav")}function s(){t.$broadcast("addNav")}function o(){t.$broadcast("showSpinner")}function i(){t.$broadcast("hideSpinner")}var r={blur:e,unblur:n,removeNav:a,addNav:s,showSpinner:o,hideSpinner:i};return r}angular.module("app.components").factory("animation",t),t.$inject=["$rootScope"]}(),function(){"use strict";function t(){function t(t,e){t.$watch("moveDown",function(t){t?e.addClass("move_down"):e.removeClass("move_down")})}return{link:t,scope:!1,restrict:"A"}}function e(t,e){function n(n,a){var s=a[0].offsetTop,o=angular.element(".stickNav").height();e(function(){s=a[0].offsetTop,o=angular.element(".stickNav").height()},1e3),angular.element(t).on("scroll",function(){var t=document.body.scrollTop;t+o>=s?(a.addClass("stickMenu"),n.$apply(function(){n.moveDown=!0})):(a.removeClass("stickMenu"),n.$apply(function(){n.moveDown=!1}))})}return{link:n,scope:!1,restrict:"A"}}function n(){function t(t,e){t.$on("blur",function(){e.addClass("blur")}),t.$on("unblur",function(){e.removeClass("blur")})}return{link:t,scope:!1,restrict:"A"}}function a(t){function e(e,n){n.on("focusin",function(){t.removeNav()}),n.on("focusout",function(){t.addNav()});var a=n.find("input");a.on("blur",function(){angular.element(document.body).css("overflow","auto")})}return{link:e}}function s(t,e,n){function a(e,a){{var s=t[0].body.clientHeight,o=angular.element(".stickNav").height();angular.element(".kit_overview").height(),angular.element(".kit_menu").height(),angular.element(".kit_chart").height()}n(function(){var t=angular.element(".kit_overview").height(),e=angular.element(".kit_menu").height(),n=angular.element(".kit_chart").height(),i=s-o-e-t-n;a.css("height",i+"px")})}return{link:a,scope:!0,restrict:"A"}}function o(t,e){function n(t,n){e(function(){{var t=angular.element(".angular-leaflet-map").height(),e=angular.element(".stickNav").height();angular.element(".kit_chart").height()}n.css("margin-top",t+e+"px")})}return{link:n}}angular.module("app.components").directive("moveDown",t).directive("stick",e).directive("blur",n).directive("focus",a).directive("changeMapHeight",s).directive("changeContentMargin",o),t.$inject=[],e.$inject=["$window","$timeout"],a.$inject=["animation"],s.$inject=["$document","layout","$timeout"],o.$inject=["layout","$timeout"]}(),function(){"use strict";function t(t){function e(e,n){function a(t){angular.element(window).scrollTop(t-r.navbar.height-r.kitMenu.height)}function s(t){return c[t]}function o(){var t=angular.element(".md-button.button_active");if(t.length){t.removeClass("button_active");var e=t.find(".stroke_container");e.css("stroke","none"),e.css("stroke-width","1");var n=e.find(".fill_container");n.css("fill","#82A7B0")}}function i(t){var e=angular.element(t);e.addClass("button_active");var n=e.find(".stroke_container");n.css("stroke","white"),n.css("stroke-width","0.01px");var a=n.find(".fill_container");a.css("fill","white")}var r,c=n.children();t(function(){r={navbar:{height:angular.element(".stickNav").height()},kitMenu:{height:angular.element(".kit_menu").height()},kitOverview:{height:angular.element(".kit_overview").height(),offset:angular.element(".kit_overview").offset().top,buttonOrder:0},kitDashboard:{height:angular.element(".kit_chart").height(),offset:angular.element(".kit_chart").offset().top,buttonOrder:1},kitUser:{},kitComments:{}}},1e3);for(var l=0;l<c.length;l++){var u=c[l];angular.element(u).on("click",function(){var t=angular.element(this).index();for(var e in r)if(r[e].buttonOrder===t){var n=r[e].offset;
a(n)}})}var d;angular.element(window).on("scroll",function(){var t=document.body.scrollTop,e=t+r.navbar.height+r.kitMenu.height;if("none"!==d&&e<=r.kitOverview.offset){var n=s(r.kitOverview.buttonOrder);o(),d="none"}else if("overview"!==d&&e>=r.kitOverview.offset&&e<=r.kitOverview.offset+r.kitOverview.height){var n=s(r.kitOverview.buttonOrder);o(),i(n),d="overview"}else if("chart"!==d&&e>=r.kitDashboard.offset&&e<=r.kitDashboard.offset+r.kitDashboard.height){var n=s(r.kitDashboard.buttonOrder);o(),i(n),d="chart"}})}return{link:e,restrict:"A"}}angular.module("app.components").directive("activeButton",t),t.$inject=["$timeout"]}(),function(){"use strict";function t(t){function e(t){s("success",t)}function n(t){s("error",t)}function a(t){s("info",t)}function s(e,n,a){a=void 0===a?"top":a,t.show({controller:"AlertController",controllerAs:"vm",templateUrl:"app/components/alert/alert"+e+".html",hideDelay:1e4,position:a,locals:{message:n}})}var o={success:e,error:n,info:a};return o}angular.module("app.components").factory("alert",t),t.$inject=["$mdToast"]}(),function(){"use strict";function t(t,e){function n(){t.hide()}var a=this;a.close=n,a.message=e}angular.module("app.components").controller("AlertController",t),t.$inject=["$mdToast","message"]}(),function(){"use strict";angular.module("app.auth",[])}(),function(){"use strict"}(),angular.module("app",["ngMaterial","ui.router","restangular","angularSpinner","ngDropdowns","app.components","app.auth"]),function(){"use strict";function t(t,e,n,a){t.state("landing",{url:"/",resolve:{location:["geolocation",function(t){var e=t.getPositionObj();return e?e:t.callAPI().then(function(t){var e=t.data.loc.split(","),n={lat:parseFloat(e[0]),lng:parseFloat(e[1])};return n})}],initialMarkers:["$state","device","location",function(t,e,n){return e.getDevices(n).then(function(e){e=e.plain();var n=e[0];t.go("home.kit",{id:n.id})})}]}}).state("home",{url:"","abstract":!0,views:{"":{templateUrl:"app/components/home/template.html"},"map@home":{templateUrl:"app/components/map/map.html",controller:"MapController",controllerAs:"vm"}},resolve:{location:["geolocation",function(t){return t.callAPI().then(function(t){var e=t.data.loc.split(","),n={lat:parseFloat(e[0]),lng:parseFloat(e[1])};return n})}],sensorTypes:["sensor",function(t){return t.callAPI().then(function(t){return t=t.plain()})}],initialMarkers:["$state","device","location","utils","sensorTypes","Kit",function(t,e,n,a){return e.getDevices(n).then(function(t){t=t.plain();var e=t.map(function(t){var e=a.parseKit(t),n={lat:t.data.location.latitude,lng:t.data.location.longitude,message:'<div class="popup"><div class="popup_top '+e.kitClass+'"><p class="popup_name">'+e.kitName+'</p><p class="popup_type">'+e.kitType+'</p><p class="popup_time"><md-icon md-svg-src="./assets/images/update_icon.svg"></md-icon>'+e.kitLastTime+'</p></div><div class="popup_bottom"><p class="popup_location"><md-icon md-svg-src="./assets/images/location_icon.svg"></md-icon>'+e.kitLocation+'</p><div class="popup_labels"><span>'+e.kitLabels.status+"</span><span>"+e.kitLabels.exposure+"</span></div></div></div>",status:t.status,myData:{id:t.id}};return n});return e})}],initialPopup:["leafletData","initialMarkers",function(t,e){var n=e[0].myData.id;t.getMap().then(function(t){for(var e in t._layers)if(t._layers[e].options.myData){var a=t._layers[e].options.myData.id;a===n&&angular.element(t._layers[e]._icon).click()}})}]}}).state("home.kit",{url:"/kits/:id",views:{"container@home":{templateUrl:"app/components/kit/kit.html",controller:"KitController",controllerAs:"vm"}},resolve:{marker:["$stateParams","device","marker",function(t,e,n){return e.getDevice(t.id).then(function(t){return t=t.plain(),n.setCurrentMarker(t),n.dataLoaded(),t})}]}}),e.otherwise("/"),n.html5Mode({enabled:!0,requireBase:!1}).hashPrefix("!"),a.setBaseUrl("https://new-api.smartcitizen.me/v0")}angular.module("app").config(t),t.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","RestangularProvider"]}(),function(){"use strict";function t(t,e,n){t.$on("$stateChangeStart",function(){}),e.addFullRequestInterceptor(function(t,e,a,s,o,i,r){if(n.isAuth()){var c=n.getCurrentUser().token;o.Authorization="Bearer "+c}return{element:t,headers:o,params:i,httpConfig:r}})}angular.module("app").run(t),t.$inject=["$rootScope","Restangular","auth","$templateCache"]}(),angular.module("app").run(["$templateCache",function(t){t.put("app/components/alert/alerterror.html",'<md-toast class="red"><md-icon md-svg-src="./assets/images/alert_icon.svg" alt="Insert Drive Icon" class="alert_icon"></md-icon><span flex="">{{ vm.message }}</span><md-button ng-click="vm.close()"><md-icon md-svg-src="./assets/images/close_icon_black.svg" alt="Insert Drive Icon" class="close_icon"></md-icon></md-button></md-toast>'),t.put("app/components/alert/alertinfo.html",'<md-toast class="blue"><md-icon md-svg-src="./assets/images/alert_icon.svg" alt="Insert Drive Icon" class="alert_icon"></md-icon><span flex="">{{ vm.message }}</span><md-button ng-click="vm.close()"><md-icon md-svg-src="./assets/images/close_icon_black.svg" alt="Insert Drive Icon" class="close_icon"></md-icon></md-button></md-toast>'),t.put("app/components/alert/alertsuccess.html",'<md-toast class="green"><md-icon md-svg-src="./assets/images/alert_icon.svg" alt="Insert Drive Icon" class="alert_icon"></md-icon><span flex="">{{ vm.message }}</span><md-button ng-click="vm.close()"><md-icon md-svg-src="./assets/images/close_icon_black.svg" alt="Insert Drive Icon" class="close_icon"></md-icon></md-button></md-toast>'),t.put("app/components/home/home.html",'<div layout="vertical" layout-fill=""><md-content><section class="content"><section class="map"><h1>Here\'s the map</h1></section><section class="kit_data"><section class="kit_menu" layout="row" layout-align="center center" stick=""><p>Bar with kit info</p></section><section class="kit_fixed" move-down=""><section class="kit_overview" layout="row" layout-align="center center"><p>Kit data overview</p></section><section class="kit_detailed" layout="row" layout-align="center center"><section class="kit_chart"><p>Here it\'s the data</p></section></section></section></section></section></md-content></div>'),t.put("app/components/home/template.html",'<div layout="vertical" layout-fill=""><md-content><section class="content"><div ui-view="map" class="map_state"></div><div ui-view="container" class="kit"></div></section></md-content></div>'),t.put("app/components/kit/kit.html",'<section class="kit_data" change-content-margin=""><section class="kit_menu" layout="row" layout-align="center center" stick=""><div class="container"><div class="kit_user"><md-icon md-svg-src="{{ vm.marker.owner.avatar || \'./assets/images/avatar.svg\'}}"></md-icon><span>{{ vm.marker.owner.username}}</span></div><div class="kit_name"><md-icon md-svg-src="./assets/images/sensor_icon.svg"></md-icon><span>{{ vm.marker.device.name }}</span></div><div class="kit_battery"><md-icon md-svg-src="{{ vm.battery.icon }}"></md-icon><span>{{ vm.battery.value }} {{ vm.battery.unit }}</span></div><div class="kit_navbar" active-button=""><md-button href="#" class="md-flat chart_icon" aria-label=""><md-icon md-svg-src="./assets/images/chart_icon.svg"></md-icon></md-button><md-button href="#" class="md-flat kit_details_icon" aria-label=""><md-icon md-svg-src="./assets/images/kit_details_icon.svg"></md-icon></md-button><md-button href="#" class="md-flat user_details" aria-label=""><md-icon md-svg-src="./assets/images/user_details_icon.svg"></md-icon></md-button><md-button href="#" class="md-flat discussion_icon" aria-label=""><md-icon md-svg-src="./assets/images/discussion_icon.svg"></md-icon></md-button><md-button href="" class="md-flat shape_icon kit_owner_dropdown_button" aria-label="" dropdown-menu="vm.dropdownOptions" dropdown-model="vm.dropdownSelected" dropdown-item-label="text"><md-icon md-svg-src="./assets/images/shape_icon.svg"></md-icon></md-button></div></div></section><section class="kit_fixed" move-down=""><section class="kit_overview"><md-button ng-click="vm.slide(\'right\')" class="md-flat button_scroll button_scroll_left" layout="column" layout-align="center center" aria-label=""><md-icon md-svg-src="./assets/images/arrow_left_icon.svg"></md-icon></md-button><div class="sensors_container" layout="row" layout-align="center center"><div ng-repeat="sensor in vm.sensors" class="sensor_container"><md-icon md-svg-src="{{ sensor.icon }}" class="sensor_icon"></md-icon><div class="sensor_value">{{ sensor.value }}</div><div class="sensor_right"><div class="sensor_unit">{{ sensor.unit }}</div><md-icon md-svg-src="{{ sensor.arrow }}" class="sensor_arrow"></md-icon></div><div class="clear"></div><div class="sensor_name">{{ sensor.name }}</div></div></div><md-button ng-click="vm.slide(\'left\')" class="md-flat button_scroll button_scroll_right" layout="column" layout-align="center center" aria-label=""><md-icon md-svg-src="./assets/images/arrow_right_icon.svg"></md-icon></md-button></section><section class="kit_detailed"><section class="kit_chart"><div class="container" layout="row"><div class="kit_chart_left"><div class="sensor_select"><md-icon md-svg-src="{{ vm.selectedSensorData.icon }}" class="sensor_icon_selected"></md-icon><md-select placeholder="Choose sensor" ng-model="vm.selectedSensor"><md-option ng-repeat="sensor in vm.sensors" ng-value="{{sensor.id}}" ng-selected="$first"><img class="select_image" src="{{ sensor.icon }}"> <span>{{ sensor.name }}</span></md-option></md-select></div><div class="sensor_data"><span class="sensor_value">{{ vm.selectedSensorData.value }}<span><span class="sensor_unit">{{ vm.selectedSensorData.unit }}</span></span></span></div><div class="sensor_description"><h6>{{ vm.sensors[vm.selectedSensor].name }}</h6><p>Lorep ipsum Lorep ipsumLorep ipsumLorep ipsumLorep ipsumLorep ipsumLorep ipsum <a href="#">More info</a></p></div><div class="sensor_compare"><p><span>Compare with</span><md-select placeholder="NONE" ng-model="vm.selectedSensorToCompare"><md-option ng-repeat="sensor in vm.sensorsToCompare" ng-value="{{sensor.id}}"><img class="select_image" src="{{ sensor.icon }}"> <span class="sensor_name">{{ sensor.name }}</span></md-option></md-select></p></div></div><div class="kit_chart_right" flex=""><div class="chart_navigation"><div class="kit_time"><md-icon class="kit_time_icon" md-svg-src="./assets/images/update_icon.svg"></md-icon>{{ vm.marker.time }}</div><div class="picker_container"><label for="picker_from">From:</label> <input type="text" id="picker_from" class="date_picker" placeholder="FROM"></div><div class="picker_container"><label for="picker_to">To:</label> <input type="text" id="picker_to" class="date_picker" placeholder="TO"></div><div class="chart_move"><md-button href="#" ng-click="vm.moveChart(\'left\')" class="chart_move_button chart_move_left" aria-label=""><md-icon md-svg-src="./assets/images/arrow_left_icon.svg"></md-icon></md-button><md-button href="#" ng-click="vm.moveChart(\'right\')" class="chart_move_button chart_move_right" aria-label=""><md-icon md-svg-src="./assets/images/arrow_right_icon.svg"></md-icon></md-button></div></div><div style="clear: both"></div><div chart="" class="chart_container" chart-data="vm.chartDataMain"><div ng-show="vm.loadingChart" us-spinner="{color: \'white\'}"></div></div></div></div></section><section class="kit_details"><div class="kit_detailed_content_container"><div class="kit_detailed_title_container"><md-icon class="kit_detailed_icon_title" md-svg-src="./assets/images/kit_details_icon.svg"></md-icon><h2 class="kit_detailed_title">KIT DETAILS</h2></div><div class="kit_detailed_content_container"><div class="kit_detailed_avatar"><md-icon md-svg-src="{{ vm.kit.avatar }}"></md-icon></div><div class="kit_details_content"><h3 class="kit_detailed_name kit_details_name">{{ vm.kit.name }}</h3><p class="kit_details_location"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/location_icon.svg"></md-icon><span>{{ vm.kit.location }}</span></p><p class="kit_details_type"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/kit_details_icon.svg"></md-icon><span>{{ vm.kit.type }}</span> <span class="kit_details_version"><span>SCK:</span> {{ vm.kit.version }}</span> <span class="kit_details_id"><span>ID:</span> {{ vm.kit.id }}</span></p><p class="kit_details_lastTime"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/update_icon.svg"></md-icon><span>{{ vm.kit.lastTime }}</span></p><p class="kit_details_labels"><span ng-repeat="label in vm.kit.labels">{{ label }}</span></p><div class="kit_details_description"><h4 class="kit_details_description_title">Kit Description:</h4><p class="kit_details_description_content">{{ vm.kit.description }}</p></div></div></div><div class="kit_details_manage"><div class="kit_details_manage_buttons"><md-button href="#" ng-click="" class="kit_details_button_setup" aria-label="">SET UP</md-button><md-button href="#" ng-click="" class="kit_details_button_edit" aria-label="">EDIT</md-button><md-button href="#" ng-click="" class="kit_details_button_delete" aria-label="">DELETE</md-button></div><div class="kit_details_manage_data"><div class="kit_details_macaddress"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/mac_address_icon.svg"></md-icon><span class="kit_details_manage_data_name">Mac Address:</span> <span>00:00:00:00:01</span></div><div class="kit_details_debug"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/debug_icon.svg"></md-icon><span class="kit_details_manage_data_name">Debug mode:</span> <span>Enabled</span></div><div class="kit_details_key"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/key_icon.svg"></md-icon><span class="kit_details_manage_data_name">API Key:</span> <span>34334324233d3f4f3</span></div><div class="kit_details_download"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/download_icon.svg"></md-icon><span class="kit_details_manage_data_name">Download Data</span> <span>Choose your format</span></div></div></div></div></section><section class="kit_owner"><div class="kit_detailed_content_container"><div class="kit_detailed_title_container"><md-icon class="kit_detailed_icon_title" md-svg-src="./assets/images/user_details_icon.svg"></md-icon><h2 class="kit_detailed_title">KIT OWNER</h2></div><div class="kit_detailed_content_container"><div class="kit_detailed_avatar"><md-icon md-svg-src="{{ vm.kit.owner.avatar }}"></md-icon></div><div class="kit_owner_content"><div class="kit_owner_info"><h3 class="kit_owner_username">{{ vm.kit.owner.username }}</h3><p class="kit_owner_location"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/location_icon.svg"></md-icon><span>{{ vm.kit.owner.location }}</span></p><p class="kit_owner_url"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/user_details_icon.svg"></md-icon><a ng-href="{{ vm.kit.owner.url }}">{{ vm.kit.owner.url }}</a></p></div><div class="kit_owner_kits"><h3 class="kit_owner_kits_title">Kits of {{ vm.kit.owner.username }}<h3><div class="kit_owner_kits_list" ng-repeat="kit in vm.ownerKits"><div class="kit_detailed_content_container"><div class="kit_owner_kits_list_avatar"><md-icon class="kit_owner_kits_list_avatar" md-svg-src="{{ kit.avatar }}"></md-icon></div><div class="kit_owner_kits_list_content"><p class="kit_owner_kits_list_name kit_detailed_name">{{ kit.name }}</p><p class="kit_owner_kits_list_data"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/location_icon.svg"></md-icon><span>{{ kit.location}}</span><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/sensor_icon.svg"></md-icon><span>{{ kit.type }}</span></p></div><div class="kit_owner_kits_list_config" layout="row" layout-align="center center"><div class="kit_owner_kits_list_state kit_owner_kits_list_{{ kit.state.className }}">{{ kit.state.name }}</div><md-button class="kit_owner_dropdown_button" dropdown-menu="vm.dropdownOptions" dropdown-model="vm.dropdownSelected" dropdown-item-label="text"><img src="./assets/images/config_icon.svg"></md-button></div></div></div><md-button href="#" ng-click="" class="kit_owner_kits_more_button" aria-label="">VIEW ALL KITS OF {{ vm.kit.owner.username }}</md-button></h3></h3></div></div></div></div><div class="clearfix"></div></section><section class="kit_comments"><div class="kit_detailed_content_container"><div class="kit_detailed_title_container"><md-icon class="kit_detailed_icon_title" md-svg-src="./assets/images/discussion_icon.svg"></md-icon><h2 class="kit_detailed_title">DISCUSSION</h2></div></div></section></section></section></section>'),t.put("app/components/login/login.html",'<md-button ng-click="showLogin($event)">Log In</md-button>'),t.put("app/components/login/loginModal.html",'<md-dialog><md-dialog-content class="modal modal_login"><md-button class="close_icon"><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="cancel()" class=""></md-icon></md-button><form name="signup_form" novalidate="" ng-submit="answer(vm.user)"><div class="modal_content_container"><h2>LOG IN</h2><div class="modal_message"><p>People looking for a better city</p><p>You\'re part of them? Feel free to join us!</p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Username</label> <input type="text" name="username" ng-model="vm.user.username" required=""></md-input-container><p class="errors" ng-show="signup_form.$submitted || signup_form.username.$touched"><span ng-show="signup_form.username.$error.required">Username is required</span></p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Password</label> <input type="password" name="password" ng-model="vm.user.password" required=""></md-input-container><p class="errors" ng-show="signup_form.$submitted || signup_form.password.$touched"><span ng-show="signup_form.password.$error.required">Password is required</span></p></div></div><button class="md-raised md-primary main" type="submit">LOG IN</button></form></md-dialog-content><p class="message_below"><span><span class="message_below_question">New here?</span><md-button class="message_below_link">SIGN IN</md-button></span> <span><span>Forgot your password?</span><md-button>REQUEST</md-button></span></p></md-dialog>'),t.put("app/components/map/map.html",'<section class="map" change-map-height=""><leaflet center="vm.center" tiles="vm.tiles" markers="vm.markers" defaults="vm.defaults" event-broadcast="vm.events" width="100%" height="100%"></leaflet></section>'),t.put("app/components/navbar/navbar.html",'<md-toolbar layout="row" layout-align="end center" class="stickNav"><a href="/" class="logo_link"><md-icon md-svg-src="./assets/images/LogotipoSmartCitizen.svg" alt="Insert Drive Icon" class="logo_icon"></md-icon></a><section layout="row" class="nav_left" layout-align="space-around center"><md-button ng-show="vm.isShown" href="#" class="md-flat full_height map"><md-icon md-svg-src="./assets/images/map_icon.svg" class="nav_icon"></md-icon><span>Map</span></md-button><md-button ng-show="vm.isShown" href="#" class="md-flat full_height community"><md-icon md-svg-src="./assets/images/community_icon.svg" class="nav_icon"></md-icon><span>Community</span></md-button></section><search flex=""></search><section layout="row" class="nav_right" layout-align="space-around center"><md-button ng-show="vm.isShown" href="#" class="md-flat full_height get" ng-class="{navbar_highlight_button: vm.isLoggedin}">Get your Kit</md-button><div ng-show="!vm.isLoggedin" login="" class="navbar_login_button md-display-1"></div><div ng-show="!vm.isLoggedin" signup="" class="navbar_signup_button md-display-1"></div><md-button href="" class="md-flat navbar_avatar_button" aria-label="" dropdown-menu="vm.dropdownOptions" dropdown-model="vm.dropdownSelected" dropdown-item-label="text"><md-icon class="navbar_avatar_icon" md-svg-src="{{ vm.currentUser.avatar }}"></md-icon></md-button></section></md-toolbar>'),t.put("app/components/search/search.html",'<div class="search_icon"><md-icon md-svg-src="./assets/images/search_icon_white.svg" ng-show="vm.isIconWhite"></md-icon><md-icon md-svg-src="./assets/images/search_icon_black.svg" ng-show="!vm.isIconWhite"></md-icon></div><md-autocomplete md-selected-item="vm.selectedItem" md-selected-item-change="vm.selectedItemChange(item)" md-search-text="vm.searchText" md-search-text-change="vm.searchTextChange(vm.searchText)" md-items="item in vm.querySearch(vm.searchText)" md-item-text="" placeholder="Search" md-delay="400" focus=""><md-item-template><md-icon md-svg-src="{{ item.image }}" class="result_icon"></md-icon><span class="result_name">{{ item.name }}</span> <span class="result_location">{{ item.location }}</span></md-item-template></md-autocomplete>'),t.put("app/components/signup/signup.html",'<md-button ng-click="vm.showSignup($event)">Sign Up</md-button>'),t.put("app/components/signup/signupModal.html",'<md-dialog><md-dialog-content class="modal signup"><div><md-button class="close_icon"><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="cancel()" class=""></md-icon></md-button><h2>SIGN UP</h2><div class="modal_message"><p>People looking for a better city</p><p>You\'re part of them? Feel free to join us!</p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Username</label> <input type="text" ng-model="vm.user.username"></md-input-container><p class="errors" ng-show="!!errors.username.length"><span ng-repeat="error in errors.username">Username {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Password</label> <input type="password" ng-model="vm.user.password"></md-input-container><p class="errors" ng-show="!!errors.password.length"><span ng-repeat="error in errors.password">Password {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Email</label> <input type="email" ng-model="vm.user.email"></md-input-container><p class="errors" ng-show="!!errors.email.length"><span ng-repeat="error in errors.email">Email {{ error }}<span ng-if="!$last">,</span></span></p></div></div><md-button class="md-raised md-primary main" ng-click="answer(vm.user)">Sign up</md-button></md-dialog-content><p class="message_below"><span class="message_below_question">Already have an account?</span><md-button class="message_below_link">LOG IN</md-button></p></md-dialog>')}]);